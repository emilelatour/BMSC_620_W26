{
  "hash": "a12715993c8e2e86f1ace0d002569464",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R: Working with data using the tidyverse\"\nauthor: \"Emile Latour\"\ndate: \"2026-01-14\"\ndate-format: long\nformat:\n  revealjs:\n    theme: \"../../assets/css/reveal-bmsc620_v4.scss\"\n    slide-number: true\n    show-slide-number: all\n    width: 1955\n    height: 1100\n    footer: \"BMSC 620 | tidyverse + dplyr basics\"\n    html-math-method: mathjax\n    header-includes: |\n      <style>\n      #wrap {\n        width: 1650px;\n        height: 900px;\n        margin: 0 auto;\n        overflow: hidden;\n        border: 1px solid #999;\n        border-radius: 8px;\n      }\n      #frame {\n        width: 1650px;\n        height: 900px;\n        border: 0;\n        zoom: 1.25;\n        -moz-transform: scale(1.25);\n        -moz-transform-origin: 0 0;\n      }\n      </style>\nexecute:\n  echo: true\n  freeze: auto\neditor_options:\n  chunk_output_type: console\n---\n\n\n\n\n\n\n\n# Where we are\n\n## Goal for today (R portion)\n\nWe are learning a small, reusable \"grammar\" for working with data:\n\n- tidyverse (what it is)\n- tibbles (modern data frames)\n- subsetting (keep rows/columns)\n- pipes (`%>%`) as \"and then\"\n- core `dplyr` verbs: `filter()`, `select()`, `mutate()`, `summarize()`, `group_by()`\n\n---\n\n## Why this matters\n\nNext class we start **ggplot2 + EDA**.\n\nMost plots start with:\n\n1) keep the rows you care about (`filter()`)\n2) keep the variables you need (`select()`)\n3) create a helper variable (`mutate()`)\n4) plot (`ggplot()`)\n\n# The tidyverse\n\n## What is the tidyverse?\n\nThe tidyverse is a collection of R packages designed to work together:\n\n- **dplyr**: data manipulation\n- **ggplot2**: visualization\n- **readxl**: import Excel files (we'll use later)\n\nWe are *not* trying to learn everything in the tidyverse.\n\n---\n\n## Installing vs loading (quick reminder)\n\nInstall (once per computer):\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"tidyverse\")\n```\n:::\n\n\n\n\n\nLoad (every session):\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n\n---\n\n## What data are we using today?\n\nWe'll use `starwars` (built into `dplyr`):\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 87 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…\n 2 C-3PO       167    75 <NA>       gold       yellow         112   none  mascu…\n 3 R2-D2        96    32 <NA>       white, bl… red             33   none  mascu…\n 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…\n 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…\n 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…\n 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…\n 8 R5-D4        97    32 <NA>       white, red red             NA   none  mascu…\n 9 Biggs D…    183    84 black      light      brown           24   male  mascu…\n10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…\n# ℹ 77 more rows\n# ℹ 5 more variables: homeworld <chr>, species <chr>, films <list>,\n#   vehicles <list>, starships <list>\n```\n\n\n:::\n:::\n\n\n\n\n\n# Data frames and tibbles\n\n## Data frames vs tibbles\n\nA **data frame** is a rectangular table:\n\n- rows = observations\n- columns = variables\n\nA **tibble** is a modern data frame with nicer printing.\n\nMost tidyverse functions return tibbles.\n\n---\n\n## Quick ways to inspect data\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 87\nColumns: 14\n$ name       <chr> \"Luke Skywalker\", \"C-3PO\", \"R2-D2\", \"Darth Vader\", \"Leia Or…\n$ height     <int> 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, 2…\n$ mass       <dbl> 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77.…\n$ hair_color <chr> \"blond\", NA, NA, \"none\", \"brown\", \"brown, grey\", \"brown\", N…\n$ skin_color <chr> \"fair\", \"gold\", \"white, blue\", \"white\", \"light\", \"light\", \"…\n$ eye_color  <chr> \"blue\", \"yellow\", \"red\", \"yellow\", \"brown\", \"blue\", \"blue\",…\n$ birth_year <dbl> 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0, …\n$ sex        <chr> \"male\", \"none\", \"none\", \"male\", \"female\", \"male\", \"female\",…\n$ gender     <chr> \"masculine\", \"masculine\", \"masculine\", \"masculine\", \"femini…\n$ homeworld  <chr> \"Tatooine\", \"Tatooine\", \"Naboo\", \"Tatooine\", \"Alderaan\", \"T…\n$ species    <chr> \"Human\", \"Droid\", \"Droid\", \"Human\", \"Human\", \"Human\", \"Huma…\n$ films      <list> <\"A New Hope\", \"The Empire Strikes Back\", \"Return of the J…\n$ vehicles   <list> <\"Snowspeeder\", \"Imperial Speeder Bike\">, <>, <>, <>, \"Imp…\n$ starships  <list> <\"X-wing\", \"Imperial shuttle\">, <>, <>, \"TIE Advanced x1\",…\n```\n\n\n:::\n:::\n\n\n\n\n\nOther useful ones:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(df)\nnrow(df)\nncol(df)\n```\n:::\n\n\n\n\n\n# Subsetting: base R vs dplyr\n\n## Subsetting in base R: `[rows, cols]`\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf[rows, cols]\n```\n:::\n\n\n\n\n\nExamples:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf[1:5, ]                 # first 5 rows\ndf[, c(\"name\", \"height\")] # two columns\n```\n:::\n\n\n\n\n\n---\n\n## Logical subsetting in base R\n\nKeep rows where a condition is TRUE:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf[df$species == \"Human\", ]\n```\n:::\n\n\n\n\n\nRead it out loud:\n\n\"Give me the rows where species equals Human.\"\n\n---\n\n## The same idea in dplyr: `filter()`\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(species == \"Human\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 35 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…\n 2 Darth V…    202   136 none       white      yellow          41.9 male  mascu…\n 3 Leia Or…    150    49 brown      light      brown           19   fema… femin…\n 4 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…\n 5 Beru Wh…    165    75 brown      light      blue            47   fema… femin…\n 6 Biggs D…    183    84 black      light      brown           24   male  mascu…\n 7 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…\n 8 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…\n 9 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…\n10 Han Solo    180    80 brown      fair       brown           29   male  mascu…\n# ℹ 25 more rows\n# ℹ 5 more variables: homeworld <chr>, species <chr>, films <list>,\n#   vehicles <list>, starships <list>\n```\n\n\n:::\n:::\n\n\n\n\n\nSame idea, easier to read once you get used to it.\n\n# Pipes\n\n## The pipe `%>%` means \"and then\"\n\nPipes help you read code top-to-bottom.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(species == \"Human\") %>%\n  select(name, height, mass)\n```\n:::\n\n\n\n\n\nYou can always write code without pipes.\nWe use them for readability.\n\n# Core dplyr verbs\n\n## The 5 verbs we will use a lot\n\n- `filter()`  keep rows\n- `select()`  keep (or drop) columns\n- `mutate()`  create new columns\n- `summarize()` collapse to summaries\n- `group_by()` do summaries by groups\n\nIf you learn these five, you can do most things we need in this course.\n\n---\n\n## `filter()`: keep rows that match a condition\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(species == \"Human\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 35 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…\n 2 Darth V…    202   136 none       white      yellow          41.9 male  mascu…\n 3 Leia Or…    150    49 brown      light      brown           19   fema… femin…\n 4 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…\n 5 Beru Wh…    165    75 brown      light      blue            47   fema… femin…\n 6 Biggs D…    183    84 black      light      brown           24   male  mascu…\n 7 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…\n 8 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…\n 9 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…\n10 Han Solo    180    80 brown      fair       brown           29   male  mascu…\n# ℹ 25 more rows\n# ℹ 5 more variables: homeworld <chr>, species <chr>, films <list>,\n#   vehicles <list>, starships <list>\n```\n\n\n:::\n:::\n\n\n\n\n\nMultiple conditions:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(species == \"Human\", height >= 180)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 17 × 14\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n 1 Darth V…    202 136   none       white      yellow          41.9 male  mascu…\n 2 Biggs D…    183  84   black      light      brown           24   male  mascu…\n 3 Obi-Wan…    182  77   auburn, w… fair       blue-gray       57   male  mascu…\n 4 Anakin …    188  84   blond      fair       blue            41.9 male  mascu…\n 5 Wilhuff…    180  NA   auburn, g… fair       blue            64   male  mascu…\n 6 Han Solo    180  80   brown      fair       brown           29   male  mascu…\n 7 Boba Fe…    183  78.2 black      fair       brown           31.5 male  mascu…\n 8 Qui-Gon…    193  89   brown      fair       blue            92   male  mascu…\n 9 Padmé A…    185  45   brown      light      brown           46   fema… femin…\n10 Ric Olié    183  NA   brown      fair       blue            NA   male  mascu…\n11 Quarsh …    183  NA   black      dark       brown           62   male  mascu…\n12 Mace Wi…    188  84   none       dark       brown           72   male  mascu…\n13 Cliegg …    183  NA   brown      fair       blue            82   male  mascu…\n14 Dooku       193  80   white      fair       brown          102   male  mascu…\n15 Bail Pr…    191  NA   black      tan        brown           67   male  mascu…\n16 Jango F…    183  79   black      tan        brown           66   male  mascu…\n17 Raymus …    188  79   brown      light      brown           NA   male  mascu…\n# ℹ 5 more variables: homeworld <chr>, species <chr>, films <list>,\n#   vehicles <list>, starships <list>\n```\n\n\n:::\n:::\n\n\n\n\n\n(`,` is like \"and\" inside `filter()`.)\n\n---\n\n## `select()`: keep columns by name\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  select(name, species, height, mass)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 87 × 4\n   name               species height  mass\n   <chr>              <chr>    <int> <dbl>\n 1 Luke Skywalker     Human      172    77\n 2 C-3PO              Droid      167    75\n 3 R2-D2              Droid       96    32\n 4 Darth Vader        Human      202   136\n 5 Leia Organa        Human      150    49\n 6 Owen Lars          Human      178   120\n 7 Beru Whitesun Lars Human      165    75\n 8 R5-D4              Droid       97    32\n 9 Biggs Darklighter  Human      183    84\n10 Obi-Wan Kenobi     Human      182    77\n# ℹ 77 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\nDrop columns with `-`:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  select(-films, -vehicles, -starships)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 87 × 11\n   name     height  mass hair_color skin_color eye_color birth_year sex   gender\n   <chr>     <int> <dbl> <chr>      <chr>      <chr>          <dbl> <chr> <chr> \n 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…\n 2 C-3PO       167    75 <NA>       gold       yellow         112   none  mascu…\n 3 R2-D2        96    32 <NA>       white, bl… red             33   none  mascu…\n 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…\n 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…\n 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…\n 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…\n 8 R5-D4        97    32 <NA>       white, red red             NA   none  mascu…\n 9 Biggs D…    183    84 black      light      brown           24   male  mascu…\n10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…\n# ℹ 77 more rows\n# ℹ 2 more variables: homeworld <chr>, species <chr>\n```\n\n\n:::\n:::\n\n\n\n\n\n---\n\n## `mutate()`: create a new column\n\nExample: convert height from cm to meters\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  mutate(height_m = height / 100) %>%\n  select(name, height, height_m)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 87 × 3\n   name               height height_m\n   <chr>               <int>    <dbl>\n 1 Luke Skywalker        172     1.72\n 2 C-3PO                 167     1.67\n 3 R2-D2                  96     0.96\n 4 Darth Vader           202     2.02\n 5 Leia Organa           150     1.5 \n 6 Owen Lars             178     1.78\n 7 Beru Whitesun Lars    165     1.65\n 8 R5-D4                  97     0.97\n 9 Biggs Darklighter     183     1.83\n10 Obi-Wan Kenobi        182     1.82\n# ℹ 77 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n---\n\n## `summarize()`: reduce to a summary row\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  summarize(\n    n = n(),\n    mean_height = mean(height, na.rm = TRUE),\n    mean_mass = mean(mass, na.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n      n mean_height mean_mass\n  <int>       <dbl>     <dbl>\n1    87        175.      97.3\n```\n\n\n:::\n:::\n\n\n\n\n\n---\n\n## `group_by()` + `summarize()`: summaries by group\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  group_by(species) %>%\n  summarize(\n    n = n(),\n    mean_height = mean(height, na.rm = TRUE),\n    .groups = \"drop\"\n  ) %>%\n  arrange(desc(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 38 × 3\n   species      n mean_height\n   <chr>    <int>       <dbl>\n 1 Human       35        178 \n 2 Droid        6        131.\n 3 <NA>         4        175 \n 4 Gungan       3        209.\n 5 Kaminoan     2        221 \n 6 Mirialan     2        168 \n 7 Twi'lek      2        179 \n 8 Wookiee      2        231 \n 9 Zabrak       2        173 \n10 Aleena       1         79 \n# ℹ 28 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n# Your turn (2-3 minutes)\n\n## Task 1: Humans only\n\n1) Filter to humans  \n2) Keep only `name`, `height`, `mass`  \n3) Show the first 10 rows\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(species == \"Human\") %>%\n  select(name, height, mass) %>%\n  slice_head(n = 10)\n```\n:::\n\n\n\n\n\n---\n\n## Task 2: Conditional summaries\n\nCompute the mean height by sex:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  group_by(sex) %>%\n  summarize(\n    n = n(),\n    mean_height = mean(height, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n```\n:::\n\n\n\n\n\n# Looking ahead\n\n## Next week: ggplot2 + EDA\n\nWe will use the same pattern:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>%\n  filter(species == \"Human\") %>%\n  ggplot(aes(x = height)) +\n  geom_histogram()\n```\n:::\n\n\n\n\n\nToday was about learning the \"data wrangling\" steps that come before plotting.\n\n---\n\n## Importing data (preview only)\n\nSoon we will import Excel data:\n\n- `readxl::read_excel(\"file.xlsx\")`\n- Use good file paths (often with `here()`)\n\nWe will do this when we start working with real datasets for homework and in-class examples.\n\n# Recap\n\n## What you should remember\n\n- tidyverse = a toolkit (we'll mainly use dplyr + ggplot2 + readxl)\n- tibbles are modern data frames\n- `filter()` rows, `select()` columns\n- `%>%` means \"and then\"\n- `mutate()` create columns\n- `summarize()` + `group_by()` for conditional summaries\n\n---\n\n## Quick reference\n\n- dplyr reference: https://dplyr.tidyverse.org/reference/index.html\n- R for Data Science: https://r4ds.hadley.nz/\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}