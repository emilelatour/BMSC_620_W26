{
  "hash": "bb804f457c1af62974190038c3cf4843",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Exploratory Data Analysis and Data Visualization\"\nauthor: \"Emile Latour, Nicky Wakim, Meike Niederhausen\"\ndate: \"2026-01-21\"\ndate-format: long\nformat:\n  revealjs:\n    theme: \"../../assets/css/reveal-bmsc620_v4.scss\"\n    slide-number: true\n    show-slide-number: all\n    width: 1955\n    height: 1100\n    footer: \"BMSC 620 | EDA + Data Viz\"\n    html-math-method: mathjax\n    header-includes: |\n      <style>\n      #wrap {\n        width: 1650px;\n        height: 900px;\n        margin: 0 auto;\n        overflow: hidden;\n        border: 1px solid #999;\n        border-radius: 8px;\n      }\n      #frame {\n        width: 1650px;\n        height: 900px;\n        border: 0;\n        zoom: 1.25;\n        -moz-transform: scale(1.25);\n        -moz-transform-origin: 0 0;\n      }\n      /* Make selected tables bigger in RevealJS slides (robust to flextable output) */\n      .reveal .tbl-big {\n        font-size: 28px !important;\n        /* center the output block inside the column */\n        display: flex;\n        justify-content: center;\n      \n        /* scale from center */\n        transform: scale(1.6);\n        transform-origin: top center;\n      }\n      .reveal .tbl-big table,\n      .reveal .tbl-big .flextable,\n      .reveal .tbl-big .flextable table {\n        font-size: 28px !important;\n      }\n      .reveal .tbl-big td,\n      .reveal .tbl-big th {\n        padding: 6px 10px !important;\n      }\n      </style>\nexecute:\n  echo: true\n  freeze: auto\n---\n\n\n\n\n\n## Today's plan\n\n1. Tools for exploratory data analysis (EDA)\n2. Data wrangling with `dplyr`\n3. Summary tables with `janitor` and `rstatix`\n4. Data visualization with `ggplot2`\n\n## What is exploratory data analysis?\n\n**Exploratory Data Analysis (EDA)** is the process of:\n\n- Inspecting and summarizing data\n- Identifying patterns, outliers, and relationships\n- Understanding the structure before formal analysis\n\n\\\n\n**EDA helps answer questions like:**\n\n- What variables do I have?\n- What does the distribution look like?\n- Are there missing values?\n- How do variables relate to each other?\n\n## The tidyverse ecosystem\n\n![[Artwork by @allison_horst](https://allisonhorst.com/r-packages-functions)](/img_slides/tidyverse_celestial.jpg){fig-align=\"center\"}\n\n## The tidyverse philosophy\n\nThe **tidyverse** is a collection of R packages designed for data science.\n\n\\\n\n::: columns\n::: {.column width=\"45%\"}\n\n**Key principles:**\n\n- Consistent syntax across packages\n- Functions designed to work together\n- Human-readable code\n- Works well with the pipe operator `%>%`\n\n\\\n\n-   **ggplot2** - data visualisation\n-   **dplyr** - data manipulation\n-   **tidyr** - tidy data\n-   **readr** - read rectangular data\n-   **purrr** - functional programming\n-   **tibble** - modern data frames\n-   **stringr** - string manipulation\n-   **forcats** - factors\n-   and many more ...\n:::\n\n::: {.column width=\"55%\"}\n![](/img_slides/tidyverse.png){fig-align=\"center\" width=\"669\"}\n:::\n:::\n\n\n\\\n\n## Packages for EDA\n\n\\\n\n**Packages we'll use today:**\n\n- `dplyr` - data manipulation\n- `ggplot2` - visualization\n- `janitor` - clean tables\n- `rstatix` - summary statistics\n- `skimr` - quick data summaries\n\n\\\n\nNot all from the tidyverse, but came after and follow the philosophy.\n\n## Tidy data[^1]\n\n[^1]: Source: R for Data Science. Grolemund and Wickham.\n\n![](/img_slides/tidy-data-frame.png)\n\n1.  Each variable must have its own column.\n\n2.  Each observation must have its own row.\n\n3.  Each value must have its own cell.\n\n## Today's dataset: NHANES\n\n**National Health and Nutrition Examination Survey (NHANES)**\n\n- CDC survey assessing health and nutritional status of adults and children in the US\n- Combines interviews, physical examinations, and laboratory tests\n- Today we'll use a sample of adult participants\n\n\\\n\n**Loading the data:**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(oibiostat)\ndata(\"nhanes.samp.adult\")\n```\n:::\n\n\n\n## First look at the data\n\nAlways start by getting a sense of what's in your dataset.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n**How many rows and columns?**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(nhanes.samp.adult)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 135  76\n```\n\n\n:::\n:::\n\n\n\n**What are the variable names?**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(nhanes.samp.adult)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"ID\"               \"SurveyYr\"         \"Gender\"           \"Age\"             \n [5] \"AgeDecade\"        \"AgeMonths\"        \"Race1\"            \"Race3\"           \n [9] \"Education\"        \"MaritalStatus\"    \"HHIncome\"         \"HHIncomeMid\"     \n[13] \"Poverty\"          \"HomeRooms\"        \"HomeOwn\"          \"Work\"            \n[17] \"Weight\"           \"Length\"           \"HeadCirc\"         \"Height\"          \n[21] \"BMI\"              \"BMICatUnder20yrs\" \"BMI_WHO\"          \"Pulse\"           \n[25] \"BPSysAve\"         \"BPDiaAve\"         \"BPSys1\"           \"BPDia1\"          \n[29] \"BPSys2\"           \"BPDia2\"           \"BPSys3\"           \"BPDia3\"          \n[33] \"Testosterone\"     \"DirectChol\"       \"TotChol\"          \"UrineVol1\"       \n[37] \"UrineFlow1\"       \"UrineVol2\"        \"UrineFlow2\"       \"Diabetes\"        \n[41] \"DiabetesAge\"      \"HealthGen\"        \"DaysPhysHlthBad\"  \"DaysMentHlthBad\" \n[45] \"LittleInterest\"   \"Depressed\"        \"nPregnancies\"     \"nBabies\"         \n[49] \"Age1stBaby\"       \"SleepHrsNight\"    \"SleepTrouble\"     \"PhysActive\"      \n[53] \"PhysActiveDays\"   \"TVHrsDay\"         \"CompHrsDay\"       \"TVHrsDayChild\"   \n[57] \"CompHrsDayChild\"  \"Alcohol12PlusYr\"  \"AlcoholDay\"       \"AlcoholYear\"     \n[61] \"SmokeNow\"         \"Smoke100\"         \"Smoke100n\"        \"SmokeAge\"        \n[65] \"Marijuana\"        \"AgeFirstMarij\"    \"RegularMarij\"     \"AgeRegMarij\"     \n[69] \"HardDrugs\"        \"SexEver\"          \"SexAge\"           \"SexNumPartnLife\" \n[73] \"SexNumPartYear\"   \"SameSex\"          \"SexOrientation\"   \"PregnantNow\"     \n```\n\n\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n**What does the first few rows look like?**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(nhanes.samp.adult, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 76\n     ID SurveyYr Gender   Age AgeDecade AgeMonths Race1 Race3 Education   \n  <int> <fct>    <fct>  <int> <fct>         <int> <fct> <fct> <fct>       \n1 63147 2011_12  male      41 \" 40-49\"         NA White White Some College\n2 57165 2009_10  male      48 \" 40-49\"        586 Black <NA>  High School \n3 69465 2011_12  female    50 \" 50-59\"         NA White White College Grad\n# ℹ 67 more variables: MaritalStatus <fct>, HHIncome <fct>, HHIncomeMid <int>,\n#   Poverty <dbl>, HomeRooms <int>, HomeOwn <fct>, Work <fct>, Weight <dbl>,\n#   Length <dbl>, HeadCirc <dbl>, Height <dbl>, BMI <dbl>,\n#   BMICatUnder20yrs <fct>, BMI_WHO <fct>, Pulse <int>, BPSysAve <int>,\n#   BPDiaAve <int>, BPSys1 <int>, BPDia1 <int>, BPSys2 <int>, BPDia2 <int>,\n#   BPSys3 <int>, BPDia3 <int>, Testosterone <dbl>, DirectChol <dbl>,\n#   TotChol <dbl>, UrineVol1 <int>, UrineFlow1 <dbl>, UrineVol2 <int>, …\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## Tibbles: tidyverse data frames\n\nA **tibble** is the tidyverse version of a data frame.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 135 × 76\n      ID SurveyYr Gender   Age AgeDecade AgeMonths Race1   Race3 Education     \n * <int> <fct>    <fct>  <int> <fct>         <int> <fct>   <fct> <fct>         \n 1 63147 2011_12  male      41 \" 40-49\"         NA White   White Some College  \n 2 57165 2009_10  male      48 \" 40-49\"        586 Black   <NA>  High School   \n 3 69465 2011_12  female    50 \" 50-59\"         NA White   White College Grad  \n 4 57313 2009_10  female    74 \" 70+\"          889 White   <NA>  College Grad  \n 5 56047 2009_10  female    27 \" 20-29\"        329 White   <NA>  9 - 11th Grade\n 6 57056 2009_10  male      26 \" 20-29\"        316 Mexican <NA>  High School   \n 7 54643 2009_10  female    41 \" 40-49\"        503 White   <NA>  College Grad  \n 8 53095 2009_10  female    52 \" 50-59\"        632 White   <NA>  9 - 11th Grade\n 9 67434 2011_12  male      56 \" 50-59\"         NA White   White College Grad  \n10 60273 2009_10  male      39 \" 30-39\"        472 Black   <NA>  9 - 11th Grade\n# ℹ 125 more rows\n# ℹ 67 more variables: MaritalStatus <fct>, HHIncome <fct>, HHIncomeMid <int>,\n#   Poverty <dbl>, HomeRooms <int>, HomeOwn <fct>, Work <fct>, Weight <dbl>,\n#   Length <dbl>, HeadCirc <dbl>, Height <dbl>, BMI <dbl>,\n#   BMICatUnder20yrs <fct>, BMI_WHO <fct>, Pulse <int>, BPSysAve <int>,\n#   BPDiaAve <int>, BPSys1 <int>, BPDia1 <int>, BPSys2 <int>, BPDia2 <int>,\n#   BPSys3 <int>, BPDia3 <int>, Testosterone <dbl>, DirectChol <dbl>, …\n```\n\n\n:::\n:::\n\n\n\n\\\n\n**Benefits of tibbles:**\n\n- Prints only first 10 rows (doesn't flood console)\n- Shows column types\n- Never converts strings to factors automatically\n\n## glimpse() - quick data structure\n\n\\ \n\n`glimpse()` from the `dplyr` package shows you the structure of your data in a compact format.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(nhanes.samp.adult)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 135\nColumns: 76\n$ ID               <int> 63147, 57165, 69465, 57313, 56047, 57056, 54643, 5309…\n$ SurveyYr         <fct> 2011_12, 2009_10, 2011_12, 2009_10, 2009_10, 2009_10,…\n$ Gender           <fct> male, male, female, female, female, male, female, fem…\n$ Age              <int> 41, 48, 50, 74, 27, 26, 41, 52, 56, 39, 32, 72, 35, 2…\n$ AgeDecade        <fct>  40-49,  40-49,  50-59,  70+,  20-29,  20-29,  40-49,…\n$ AgeMonths        <int> NA, 586, NA, 889, 329, 316, 503, 632, NA, 472, 391, 8…\n$ Race1            <fct> White, Black, White, White, White, Mexican, White, Wh…\n$ Race3            <fct> White, NA, White, NA, NA, NA, NA, NA, White, NA, NA, …\n$ Education        <fct> Some College, High School, College Grad, College Grad…\n$ MaritalStatus    <fct> Married, Married, Divorced, Widowed, NeverMarried, Ne…\n$ HHIncome         <fct> 25000-34999, 25000-34999, 35000-44999, 45000-54999, 7…\n$ HHIncomeMid      <int> 30000, 30000, 40000, 50000, 87500, 12500, 60000, 2500…\n$ Poverty          <dbl> 1.41, 1.36, 2.16, 4.16, 3.51, 0.39, 2.33, 0.05, 5.00,…\n$ HomeRooms        <int> 6, 6, 10, 7, 7, 5, 9, 6, 7, 6, 4, 12, 6, 6, 8, 1, 5, …\n$ HomeOwn          <fct> Own, Own, Own, Own, Own, Own, Own, Other, Own, Own, R…\n$ Work             <fct> NotWorking, NotWorking, NotWorking, NotWorking, Worki…\n$ Weight           <dbl> 106.8, 77.4, 70.5, 61.7, 70.3, 92.6, 55.6, 82.0, 88.2…\n$ Length           <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ HeadCirc         <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ Height           <dbl> 188.8, 168.2, 161.8, 158.1, 168.1, 165.8, 155.6, 156.…\n$ BMI              <dbl> 30.00, 27.36, 26.90, 24.68, 24.88, 33.69, 22.96, 33.5…\n$ BMICatUnder20yrs <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ BMI_WHO          <fct> NA, 25.0_to_29.9, 25.0_to_29.9, 18.5_to_24.9, 18.5_to…\n$ Pulse            <int> 88, 70, 76, 64, 74, 78, 82, 96, 44, 60, 72, 88, 66, 6…\n$ BPSysAve         <int> 112, 123, 152, 132, 107, 126, 111, 114, 137, 122, 124…\n$ BPDiaAve         <int> 76, 69, 103, 81, 58, 75, 76, 71, 77, 78, 89, 66, 66, …\n$ BPSys1           <int> 114, 128, 144, 146, 106, 126, 116, 116, 134, 124, 128…\n$ BPDia1           <int> 78, 78, 104, 84, 62, 86, 72, 66, 78, 70, 94, 72, 62, …\n$ BPSys2           <int> 114, 126, 150, 130, 108, 130, 112, 116, 140, 120, 124…\n$ BPDia2           <int> 76, 76, 106, 80, 52, 74, 76, 72, 76, 80, 90, 64, 66, …\n$ BPSys3           <int> 110, 120, 154, 134, 106, 122, 110, 112, 134, 124, 124…\n$ BPDia3           <int> 76, 62, 100, 82, 64, 76, 76, 70, 78, 76, 88, 68, 66, …\n$ Testosterone     <dbl> 390.16, NA, 8.17, NA, NA, NA, NA, NA, 327.89, NA, NA,…\n$ DirectChol       <dbl> 1.19, 1.22, 2.43, NA, 1.84, 1.40, 1.24, 1.60, 1.11, 0…\n$ TotChol          <dbl> 4.84, 3.75, 5.92, NA, 4.78, 6.96, 5.77, 6.03, 5.25, 5…\n$ UrineVol1        <int> 57, 49, 30, 33, 150, 100, 17, 56, 104, 272, 120, 29, …\n$ UrineFlow1       <dbl> 0.074, 0.551, 1.304, 0.673, 0.342, 0.917, 0.283, 0.34…\n$ UrineVol2        <int> NA, NA, 114, 122, NA, NA, 61, NA, NA, NA, NA, 49, NA,…\n$ UrineFlow2       <dbl> NA, NA, 1.118, 1.220, NA, NA, 0.407, NA, NA, NA, NA, …\n$ Diabetes         <fct> No, No, No, No, No, No, No, No, No, No, Yes, No, No, …\n$ DiabetesAge      <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ HealthGen        <fct> Fair, Fair, Vgood, Vgood, Fair, Fair, Good, Fair, NA,…\n$ DaysPhysHlthBad  <int> 12, 20, 0, 0, 2, 0, 4, 0, NA, 0, 20, 2, 0, 2, NA, 7, …\n$ DaysMentHlthBad  <int> 30, 30, 0, 0, 0, 0, 5, 5, NA, 0, 10, 0, 8, 3, NA, 14,…\n$ LittleInterest   <fct> Several, None, None, None, None, Several, Several, No…\n$ Depressed        <fct> Several, None, None, None, None, None, Several, Most,…\n$ nPregnancies     <int> NA, NA, 3, 3, 2, NA, 3, 2, NA, NA, 7, 3, NA, NA, NA, …\n$ nBabies          <int> NA, NA, 3, 3, 2, NA, 3, 2, NA, NA, 2, 3, NA, NA, NA, …\n$ Age1stBaby       <int> NA, NA, 27, 23, 17, NA, 31, 22, NA, NA, 23, 20, NA, N…\n$ SleepHrsNight    <int> 9, 3, 6, 6, 6, 6, 6, 4, 7, 4, 8, 8, 7, 6, 4, 4, 5, 8,…\n$ SleepTrouble     <fct> Yes, Yes, Yes, No, No, No, No, Yes, No, No, No, No, Y…\n$ PhysActive       <fct> No, Yes, Yes, Yes, No, No, No, No, Yes, No, Yes, No, …\n$ PhysActiveDays   <int> NA, 3, 4, 7, NA, NA, NA, NA, 4, NA, 3, NA, NA, NA, NA…\n$ TVHrsDay         <fct> 1_hr, NA, 1_hr, NA, NA, NA, NA, NA, 2_hr, NA, NA, NA,…\n$ CompHrsDay       <fct> 1_hr, NA, 1_hr, NA, NA, NA, NA, NA, More_4_hr, NA, NA…\n$ TVHrsDayChild    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ CompHrsDayChild  <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ Alcohol12PlusYr  <fct> Yes, Yes, Yes, Yes, Yes, Yes, No, Yes, NA, Yes, Yes, …\n$ AlcoholDay       <int> 2, NA, 1, 1, 5, 12, 1, 12, NA, NA, NA, 1, 1, 11, NA, …\n$ AlcoholYear      <int> 2, 0, 364, 52, 24, 168, 4, 364, NA, 0, 0, 4, 2, 52, N…\n$ SmokeNow         <fct> NA, No, NA, No, Yes, Yes, No, Yes, NA, NA, NA, NA, NA…\n$ Smoke100         <fct> No, Yes, No, Yes, Yes, Yes, Yes, Yes, No, No, No, No,…\n$ Smoke100n        <fct> Non-Smoker, Smoker, Non-Smoker, Smoker, Smoker, Smoke…\n$ SmokeAge         <int> NA, 11, NA, 18, 14, 14, 10, 30, NA, NA, NA, NA, NA, N…\n$ Marijuana        <fct> Yes, Yes, No, NA, Yes, Yes, Yes, No, NA, No, Yes, NA,…\n$ AgeFirstMarij    <int> 16, 17, NA, NA, 11, 14, 11, NA, NA, NA, 17, NA, NA, 2…\n$ RegularMarij     <fct> No, Yes, No, NA, Yes, Yes, Yes, No, NA, No, Yes, NA, …\n$ AgeRegMarij      <int> NA, 17, NA, NA, 16, 14, 11, NA, NA, NA, 20, NA, NA, N…\n$ HardDrugs        <fct> Yes, No, No, NA, No, Yes, No, No, NA, No, Yes, NA, No…\n$ SexEver          <fct> Yes, Yes, Yes, NA, Yes, Yes, Yes, Yes, NA, Yes, Yes, …\n$ SexAge           <int> 15, 17, 17, NA, 13, 15, 15, 17, NA, 21, 16, NA, 17, 1…\n$ SexNumPartnLife  <int> 50, 81, 4, NA, 10, 8, 3, 5, NA, 5, 45, NA, 4, 1, NA, …\n$ SexNumPartYear   <int> 1, 10, 1, NA, 3, 1, 1, 0, NA, 5, 2, NA, 1, 1, NA, 2, …\n$ SameSex          <fct> No, No, No, NA, No, No, No, No, NA, No, Yes, NA, No, …\n$ SexOrientation   <fct> Heterosexual, Heterosexual, Heterosexual, NA, Heteros…\n$ PregnantNow      <fct> NA, NA, NA, NA, No, NA, No, NA, NA, NA, No, NA, NA, N…\n```\n\n\n:::\n:::\n\n\n\n\\\n\n- Each row shows: variable name, type, and first few values\n- Easier to read than `str()` for large datasets\n\n## skim() - comprehensive summary\n\n`skim()` from the `skimr` package gives you detailed summaries and mini visualizations.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nskim(nhanes.samp.adult)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n\n![](/img_slides/nhanes_skim_output.png){fig-align=\"center\" width=\"70%\"}\n\n## The pipe operator: `%>%`\n\nThe pipe operator `%>%` takes the output from one function and passes it as the first argument to the next function.\n\n**Think of it as:** \"and then...\"\n\n\\\n\nI want to find my keys, then start my car, then drive to work, then park my car.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n**Nested**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npark(drive(start_car(find(\"keys\")), \n           to = \"work\"))\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n**Piped**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfind(\"keys\") %>%\n  start_car() %>%\n  drive(to = \"work\") %>%\n  park()\n```\n:::\n\n\n:::\n:::\n\n## The pipe operator: `%>%`\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Without pipes (nested)\n\n\\\n\nRead from inside-out\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(nhanes.samp.adult, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 76\n     ID SurveyYr Gender   Age AgeDecade AgeMonths Race1 Race3 Education   \n  <int> <fct>    <fct>  <int> <fct>         <int> <fct> <fct> <fct>       \n1 63147 2011_12  male      41 \" 40-49\"         NA White White Some College\n2 57165 2009_10  male      48 \" 40-49\"        586 Black <NA>  High School \n3 69465 2011_12  female    50 \" 50-59\"         NA White White College Grad\n# ℹ 67 more variables: MaritalStatus <fct>, HHIncome <fct>, HHIncomeMid <int>,\n#   Poverty <dbl>, HomeRooms <int>, HomeOwn <fct>, Work <fct>, Weight <dbl>,\n#   Length <dbl>, HeadCirc <dbl>, Height <dbl>, BMI <dbl>,\n#   BMICatUnder20yrs <fct>, BMI_WHO <fct>, Pulse <int>, BPSysAve <int>,\n#   BPDiaAve <int>, BPSys1 <int>, BPDia1 <int>, BPSys2 <int>, BPDia2 <int>,\n#   BPSys3 <int>, BPDia3 <int>, Testosterone <dbl>, DirectChol <dbl>,\n#   TotChol <dbl>, UrineVol1 <int>, UrineFlow1 <dbl>, UrineVol2 <int>, …\n```\n\n\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### With pipes\n\n\\\n\nRead left to right\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>% \n  head(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 76\n     ID SurveyYr Gender   Age AgeDecade AgeMonths Race1 Race3 Education   \n  <int> <fct>    <fct>  <int> <fct>         <int> <fct> <fct> <fct>       \n1 63147 2011_12  male      41 \" 40-49\"         NA White White Some College\n2 57165 2009_10  male      48 \" 40-49\"        586 Black <NA>  High School \n3 69465 2011_12  female    50 \" 50-59\"         NA White White College Grad\n# ℹ 67 more variables: MaritalStatus <fct>, HHIncome <fct>, HHIncomeMid <int>,\n#   Poverty <dbl>, HomeRooms <int>, HomeOwn <fct>, Work <fct>, Weight <dbl>,\n#   Length <dbl>, HeadCirc <dbl>, Height <dbl>, BMI <dbl>,\n#   BMICatUnder20yrs <fct>, BMI_WHO <fct>, Pulse <int>, BPSysAve <int>,\n#   BPDiaAve <int>, BPSys1 <int>, BPDia1 <int>, BPSys2 <int>, BPDia2 <int>,\n#   BPSys3 <int>, BPDia3 <int>, Testosterone <dbl>, DirectChol <dbl>,\n#   TotChol <dbl>, UrineVol1 <int>, UrineFlow1 <dbl>, UrineVol2 <int>, …\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## The pipe operator: `%>%`\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Without pipes (nested)\n\n\\\n\nHarder to read when operations stack up:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(filter(nhanes.samp.adult, \n            Diabetes == \"Yes\")$BMI, \n     na.rm = TRUE)\n```\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### With pipes\n\n\\\n\nMore readable for complex operations:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(Diabetes == \"Yes\") %>%\n  pull(BMI) %>%\n  mean(na.rm = TRUE)\n```\n:::\n\n\n\n:::\n:::\n\n## dplyr: The grammar of data manipulation\n\n`dplyr` provides a consistent set of **verbs** for data manipulation:\n\n\\\n\n| Function | What it does |\n|----------|-------------|\n| `filter()` | Keep rows that meet conditions |\n| `select()` | Keep or drop columns |\n| `mutate()` | Create or modify columns |\n| `arrange()` | Sort rows |\n| `group_by()` | Group data for summaries |\n| `summarize()` | Calculate summary statistics |\n\n\\\n\nThese verbs can be chained together with `%>%` for powerful data transformations.\n\n## filter() - subsetting rows\n\n`filter()` keeps rows that meet specified conditions.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Single condition\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(Diabetes == \"Yes\")\n```\n:::\n\n\n\n\\\n\n### Multiple conditions (AND)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(Gender == \"female\", \n         Age > 50)\n\n# OR \n\nnhanes.samp.adult %>%\n  filter(Gender == \"female\" & \n         Age > 50)\n```\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Using OR (`|`)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(Diabetes == \"Yes\" | \n         Age > 70)\n```\n:::\n\n\n\n\\\n\n### Numeric comparisons\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(BMI >= 30)\n```\n:::\n\n\n\n:::\n:::\n\n## Comparison operators in R\n\nWhen using `filter()`, you'll use these comparison operators:\n\n\\\n\n| Operator | Meaning |\n|----------|---------|\n| `==` | Equal to |\n| `!=` | Not equal to |\n| `>` | Greater than |\n| `>=` | Greater than or equal to |\n| `<` | Less than |\n| `<=` | Less than or equal to |\n| `&` or `,` | AND (both conditions must be true) |\n| `|` | OR (at least one condition must be true) |\n| `is.na()` | Check if value is missing |\n\n## select() - choosing columns\n\n`select()` lets you keep or remove specific columns.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Select specific columns\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  select(Age, Gender, BMI)\n```\n:::\n\n\n\n\\\n\n### Select a range of columns\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  select(Age:Education)\n```\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Drop columns (i.e. de-select)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  select(-ID)\n```\n:::\n\n\n\n\\ \n\n### Select by pattern\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  select(starts_with(\"B\"))\n```\n:::\n\n\n\n:::\n:::\n\n## mutate() - creating new variables\n\n`mutate()` creates new columns or modifies existing ones.\n\n\\\n\n**Important:** `mutate()` doesn't change your original data unless you save it!\n\n\\\n\n### Create a single new column\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  mutate(height_m = Height / 100) %>%\n  select(ID, Height, height_m)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 135 × 3\n      ID Height height_m\n   <int>  <dbl>    <dbl>\n 1 63147   189.     1.89\n 2 57165   168.     1.68\n 3 69465   162.     1.62\n 4 57313   158.     1.58\n 5 56047   168.     1.68\n 6 57056   166.     1.66\n 7 54643   156.     1.56\n 8 53095   156.     1.56\n 9 67434   181.     1.81\n10 60273   178.     1.78\n# ℹ 125 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n## mutate() with case_when()\n\n`case_when()` is useful for creating categorical variables based on conditions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  mutate(bmi_category = case_when(\n    BMI < 18.5 ~ \"Underweight\",\n    BMI < 25 ~ \"Normal\",\n    BMI < 30 ~ \"Overweight\",\n    BMI >= 30 ~ \"Obese\"\n  )) %>%\n  select(ID, BMI, bmi_category) %>%\n  head(5)  # Just show first 5 rows\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 3\n     ID   BMI bmi_category\n  <int> <dbl> <chr>       \n1 63147  30   Obese       \n2 57165  27.4 Overweight  \n3 69465  26.9 Overweight  \n4 57313  24.7 Normal      \n5 56047  24.9 Normal      \n```\n\n\n:::\n:::\n\n\n\n\\\n\n- `case_when()` evaluates conditions in order\n- Use `~` to separate condition from result  \n- First matching condition wins\n\n## mutate() - multiple columns at once\n\nYou can create several new variables in one `mutate()` call.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  mutate(\n    height_m = Height / 100,\n    weight_kg = Weight * 0.453592,\n    bmi_calculated = weight_kg / (height_m^2)\n  ) %>%\n  select(ID, Height, Weight, BMI, height_m, weight_kg, bmi_calculated)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 135 × 7\n      ID Height Weight   BMI height_m weight_kg bmi_calculated\n   <int>  <dbl>  <dbl> <dbl>    <dbl>     <dbl>          <dbl>\n 1 63147   189.  107.   30       1.89      48.4           13.6\n 2 57165   168.   77.4  27.4     1.68      35.1           12.4\n 3 69465   162.   70.5  26.9     1.62      32.0           12.2\n 4 57313   158.   61.7  24.7     1.58      28.0           11.2\n 5 56047   168.   70.3  24.9     1.68      31.9           11.3\n 6 57056   166.   92.6  33.7     1.66      42.0           15.3\n 7 54643   156.   55.6  23.0     1.56      25.2           10.4\n 8 53095   156.   82    33.5     1.56      37.2           15.2\n 9 67434   181.   88.2  26.8     1.81      40.0           12.2\n10 60273   178.  119    37.5     1.78      54.0           17.0\n# ℹ 125 more rows\n```\n\n\n:::\n:::\n\n\n\n## Quick practice (2-3 minutes)\n\nUsing the `nhanes.samp.adult` data and pipes:\n\n1. Filter to people with diabetes\n2. Select the columns: Age, Gender, BMI, Diabetes\n3. Create a new column called `age_group` that is:\n   - \"Under 50\" if Age < 50\n   - \"50 or older\" if Age >= 50\n\n(Hint: Use `filter()`, `select()`, and `mutate()` with `case_when()`)\n\n## Quick practice: solution\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(Diabetes == \"Yes\") %>%\n  select(Age, Gender, BMI, Diabetes) %>%\n  mutate(age_group = case_when(\n    Age < 50 ~ \"Under 50\",\n    Age >= 50 ~ \"50 or older\"\n  ))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 13 × 5\n     Age Gender   BMI Diabetes age_group  \n   <int> <fct>  <dbl> <fct>    <chr>      \n 1    32 female  45.5 Yes      Under 50   \n 2    63 male    37.7 Yes      50 or older\n 3    49 male    34.6 Yes      Under 50   \n 4    36 male    38.7 Yes      Under 50   \n 5    38 female  31.7 Yes      Under 50   \n 6    55 male    22.6 Yes      50 or older\n 7    57 female  29.2 Yes      50 or older\n 8    59 female  21.6 Yes      50 or older\n 9    70 female  31.8 Yes      50 or older\n10    61 female  38.7 Yes      50 or older\n11    33 female  42.8 Yes      Under 50   \n12    58 female  34.3 Yes      50 or older\n13    57 male    40.4 Yes      50 or older\n```\n\n\n:::\n:::\n\n\n\n## arrange() - sorting rows\n\n`arrange()` sorts rows by one or more variables.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Sort ascending (default)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  select(ID, Age, BMI) %>%\n  arrange(Age) %>% \n  head(8)\n```\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Sort descending\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  select(ID, Age, BMI) %>%\n  arrange(desc(Age)) %>% \n  head(8)\n```\n:::\n\n\n\nUse `desc()` to sort in descending order.\n:::\n:::\n\n\n## arrange() - multiple columns\n\nYou can sort by multiple variables at once.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  select(ID, Gender, Age, BMI) %>%\n  arrange(Gender, desc(Age)) %>%\n  head(8)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 × 4\n     ID Gender   Age   BMI\n  <int> <fct>  <int> <dbl>\n1 61964 female    80  19.2\n2 57313 female    74  24.7\n3 59171 female    74  32.0\n4 58284 female    72  25.2\n5 67897 female    71  17.1\n6 67285 female    70  36.6\n7 67668 female    70  31.8\n8 69421 female    68  25.9\n```\n\n\n:::\n:::\n\n\n\nSorts by Gender first, then by Age (descending) within each gender group.\n\n## group_by() - preparing for summaries\n\n`group_by()` groups your data by one or more variables.\n\n-   What if I want to quickly look at group differences?\n-   It will not change how the data look, but changes the actions of following functions\n\n\\\n\n**By itself, it doesn't change how the data looks:**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  group_by(Gender)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 135 × 76\n# Groups:   Gender [2]\n      ID SurveyYr Gender   Age AgeDecade AgeMonths Race1   Race3 Education     \n   <int> <fct>    <fct>  <int> <fct>         <int> <fct>   <fct> <fct>         \n 1 63147 2011_12  male      41 \" 40-49\"         NA White   White Some College  \n 2 57165 2009_10  male      48 \" 40-49\"        586 Black   <NA>  High School   \n 3 69465 2011_12  female    50 \" 50-59\"         NA White   White College Grad  \n 4 57313 2009_10  female    74 \" 70+\"          889 White   <NA>  College Grad  \n 5 56047 2009_10  female    27 \" 20-29\"        329 White   <NA>  9 - 11th Grade\n 6 57056 2009_10  male      26 \" 20-29\"        316 Mexican <NA>  High School   \n 7 54643 2009_10  female    41 \" 40-49\"        503 White   <NA>  College Grad  \n 8 53095 2009_10  female    52 \" 50-59\"        632 White   <NA>  9 - 11th Grade\n 9 67434 2011_12  male      56 \" 50-59\"         NA White   White College Grad  \n10 60273 2009_10  male      39 \" 30-39\"        472 Black   <NA>  9 - 11th Grade\n# ℹ 125 more rows\n# ℹ 67 more variables: MaritalStatus <fct>, HHIncome <fct>, HHIncomeMid <int>,\n#   Poverty <dbl>, HomeRooms <int>, HomeOwn <fct>, Work <fct>, Weight <dbl>,\n#   Length <dbl>, HeadCirc <dbl>, Height <dbl>, BMI <dbl>,\n#   BMICatUnder20yrs <fct>, BMI_WHO <fct>, Pulse <int>, BPSysAve <int>,\n#   BPDiaAve <int>, BPSys1 <int>, BPDia1 <int>, BPSys2 <int>, BPDia2 <int>,\n#   BPSys3 <int>, BPDia3 <int>, Testosterone <dbl>, DirectChol <dbl>, …\n```\n\n\n:::\n:::\n\n\n\nNotice the \"Groups: Gender [2]\" at the top - the data is now grouped, but not summarized.\n\n## group_by() with summarize()\n\nThe real power of `group_by()` comes when combined with `summarize()`.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Without grouping\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  summarize(\n    mean_bmi = mean(BMI, na.rm = TRUE),\n    sd_bmi = sd(BMI, na.rm = TRUE), \n    n = n()\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 3\n  mean_bmi sd_bmi     n\n     <dbl>  <dbl> <int>\n1     29.1   7.55   135\n```\n\n\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### With grouping by Gender\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  group_by(Gender) %>%\n  summarize(\n    mean_bmi = mean(BMI, na.rm = TRUE),\n    sd_bmi = sd(BMI, na.rm = TRUE),\n    n = n()\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  Gender mean_bmi sd_bmi     n\n  <fct>     <dbl>  <dbl> <int>\n1 female     29.0   8.81    70\n2 male       29.2   5.97    65\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n`n()` counts the number of observations in each group.\n\n## Chaining multiple dplyr verbs\n\nYou can chain operations together to answer complex questions.\n\n\\\n\n**Question:** What is the mean BMI for people over age 50, by diabetes status?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(Age > 50) %>%\n  select(Age, BMI, Diabetes) %>%\n  group_by(Diabetes) %>%\n  summarize(\n    n = n(),\n    mean_bmi = mean(BMI, na.rm = TRUE),\n    sd_bmi = sd(BMI, na.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  Diabetes     n mean_bmi sd_bmi\n  <fct>    <int>    <dbl>  <dbl>\n1 No          39     28.1   6.30\n2 Yes          8     32.0   7.16\n```\n\n\n:::\n:::\n\n\n\n## Summary statistics with rstatix\n\n`get_summary_stats()` in `rstatix` package provides pipe-friendly functions for summary statistics.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Summary for one variable\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  get_summary_stats(BMI, \n                    type = \"mean_sd\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 4\n  variable     n  mean    sd\n  <fct>    <dbl> <dbl> <dbl>\n1 BMI        135  29.1  7.55\n```\n\n\n:::\n:::\n\n\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Summary by groups\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  group_by(Gender) %>%\n  get_summary_stats(BMI, \n                    type = \"mean_sd\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 5\n  Gender variable     n  mean    sd\n  <fct>  <fct>    <dbl> <dbl> <dbl>\n1 female BMI         70  29.0  8.82\n2 male   BMI         65  29.2  5.97\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n\\\n\nOther types: `\"median_iqr\"`, `\"five_number\"`, `\"full\"`, `\"common\"`\n\n## Multiple variables and groups\n\n`get_summary_stats()` can handle multiple variables at once.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  group_by(Gender, Diabetes) %>%\n  get_summary_stats(BMI, Height, Weight, type = \"mean_sd\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 12 × 6\n   Gender Diabetes variable     n  mean    sd\n   <fct>  <fct>    <fct>    <dbl> <dbl> <dbl>\n 1 female No       BMI         62  28.3  8.75\n 2 female No       Height      62 163.   7.57\n 3 female No       Weight      62  75.7 25.9 \n 4 female Yes      BMI          8  34.4  7.73\n 5 female Yes      Height       8 161.   7.11\n 6 female Yes      Weight       8  90.0 22.6 \n 7 male   No       BMI         60  28.8  5.69\n 8 male   No       Height      60 176.   6.97\n 9 male   No       Weight      60  89.6 18.1 \n10 male   Yes      BMI          5  34.8  7.15\n11 male   Yes      Height       5 178.   9.28\n12 male   Yes      Weight       5 109.  22.0 \n```\n\n\n:::\n:::\n\n\n\n## Quick check: putting it together\n\nUsing what you've learned, try to answer:\n\n**What is the mean age and BMI for each combination of Gender and Diabetes status?**\n\n\\\n\nHints:\n\n- Use `group_by()` with two variables\n- Use `get_summary_stats()` or `summarize()`\n- Include `n()` to count observations\n\n## Quick check: solution\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Using rstatix\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  group_by(Gender, Diabetes) %>%\n  get_summary_stats(Age, BMI, \n                    type = \"mean_sd\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 × 6\n  Gender Diabetes variable     n  mean    sd\n  <fct>  <fct>    <fct>    <dbl> <dbl> <dbl>\n1 female No       Age         62  42.2 16.2 \n2 female No       BMI         62  28.3  8.75\n3 female Yes      Age          8  51   14.5 \n4 female Yes      BMI          8  34.4  7.73\n5 male   No       Age         60  45.4 16.4 \n6 male   No       BMI         60  28.8  5.69\n7 male   Yes      Age          5  52   10.2 \n8 male   Yes      BMI          5  34.8  7.15\n```\n\n\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Using dplyr summarize\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  group_by(Gender, Diabetes) %>%\n  summarize(\n    n = n(),\n    mean_age = mean(Age, na.rm = TRUE),\n    mean_bmi = mean(BMI, na.rm = TRUE)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 5\n# Groups:   Gender [2]\n  Gender Diabetes     n mean_age mean_bmi\n  <fct>  <fct>    <int>    <dbl>    <dbl>\n1 female No          62     42.2     28.3\n2 female Yes          8     51       34.4\n3 male   No          60     45.4     28.8\n4 male   Yes          5     52       34.8\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## Summary tables with janitor\n\n`tabyl()` in the `janitor` package makes frequency tables much easier than base R.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### One-way frequency table\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  tabyl(Gender)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Gender  n   percent\n female 70 0.5185185\n   male 65 0.4814815\n```\n\n\n:::\n:::\n\n\n\nGives you counts (`n`), percentages (`percent`), and includes missing values automatically.\n\n:::\n::: {.column width=\"50%\"}\n\n### Two-way table (cross-tabulation)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  tabyl(Gender, Diabetes)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Gender No Yes\n female 62   8\n   male 60   5\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## Enhancing tables with janitor adorn functions\n\n`janitor` has \"adorn\" functions to format tables nicely.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Add percentages\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  tabyl(Gender, Diabetes) %>%\n  adorn_percentages(\"row\") %>%\n  adorn_pct_formatting(digits = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Gender    No   Yes\n female 88.6% 11.4%\n   male 92.3%  7.7%\n```\n\n\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Add totals\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  tabyl(Gender, Diabetes) %>%\n  adorn_totals(c(\"row\", \"col\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Gender  No Yes Total\n female  62   8    70\n   male  60   5    65\n  Total 122  13   135\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## Combining adorn functions\n\nYou can chain multiple adorn functions together.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  tabyl(Gender, Diabetes) %>%\n  adorn_totals(c(\"row\", \"col\")) %>%\n  adorn_percentages(\"row\") %>%\n  adorn_pct_formatting(digits = 1) %>%\n  adorn_ns()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Gender          No        Yes        Total\n female 88.6%  (62) 11.4%  (8) 100.0%  (70)\n   male 92.3%  (60)  7.7%  (5) 100.0%  (65)\n  Total 90.4% (122)  9.6% (13) 100.0% (135)\n```\n\n\n:::\n:::\n\n\n\n\n\\\n\n- `adorn_ns()` adds the counts alongside percentages\n- Order matters: calculate totals first, then percentages\n\n\n\n\n## Data visualization with ggplot2\n\n![[Artwork by @allison_horst](https://allisonhorst.com/r-packages-functions)](/img_slides/horst_ggplot2_exploratory.png){fig-align=\"center\"}\n\n## Why visualize data?\n\nVisualizations help us:\n\n- Understand distributions\n- Identify outliers and patterns\n- Compare groups\n- Communicate findings\n\n\\\n\n\n## Anscombe's Quartet\n\nFour datasets with identical summary statistics but very different patterns:\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-44-1.png){width=960}\n:::\n:::\n\n\n\n\nAll four have the same mean, SD, and correlation - but look how different they are!\n\n\n## The Datasaurus Dozen\n\nSimilar to Anscombe's quartet, The Datasaurus Dozen is a compilation of 13 data sets with similar numerical summaries and radically different visual summaries. See a great discussion of this dataset by the creators, Justin Matejka and George Fitzmaurice [here](https://www.research.autodesk.com/publications/same-stats-different-graphs/)\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-45-1.png){width=960}\n:::\n:::\n\n\n\nMean X = 54.3, Y = 47.8\nSD X = 16.77, Y = 26.94\nCor = -0.06\n\n## The grammar of graphics\n\n`ggplot2` implements the **grammar of graphics** - a framework for describing plots.\n\n\\\n\n**Every ggplot has three essential components:**\n\n1. **Data** - the dataset you're plotting\n2. **Aesthetics** (`aes()`) - mappings from data to visual properties (x, y, color, size, etc.)\n3. **Geoms** - geometric objects that represent the data (points, lines, bars, etc.)\n\n\\\n\n**Basic template:**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = DATA, \n       mapping = aes(x = X_VAR, y = Y_VAR)) +\n  geom_SOMETHING()\n```\n:::\n\n\n\n\\\n\nNotice we use `+` (not `%>%`) to add layers to a ggplot.\n\n## Basics of a ggplot\n\n![](/img_slides/ggplot_basics_from_ppt.png){fig-align=\"center\"}\n\n## Grammar of ggplot2\n\n::::: columns\n::: {.column width=\"60%\"}\n![](/img_slides/ggplot_layers.png){fig-align=\"center\" width=\"1600\"}\n:::\n\n::: {.column width=\"40%\"}\n-   `ggplot2` needs at least the following three to produce a chart:\n    -   data, a mapping, and a layer\n\n \n\n-   For the most part, there are default settings for the other parts:\n    -   scales, facets, coordinates, and themes\n:::\n:::::\n\n<!-- ## **Data** -->\n\n<!-- -   ggplot2 uses data to construct a plot -->\n\n<!-- -   Works best with tidy data (when every observation is a row and each variable is a column) -->\n\n<!-- -   First step in plotting: -->\n\n<!--     -   Pass the data to the `ggplot` function, which stores the data to be used later by other parts of the plotting system -->\n\n<!-- ## Data -->\n\n<!-- -   For example, if we intend to make a graphic about the `mpg` dataset, we would start as follows: -->\n\n<!-- ```{r} -->\n<!-- #| fig-width: 6 -->\n<!-- #| fig-height: 4 -->\n<!-- #| fig-align: center -->\n\n<!-- ggplot(data = mpg) -->\n<!-- ``` -->\n\n<!-- ## **Mapping** -->\n\n<!-- -   Mappings use the `aes()` function to **map** variables to the different axes on a plot -->\n\n<!--     -   `aes()` stands for \"aesthetics\" -->\n\n<!-- ## Data + Mapping -->\n\n<!-- -   If we want the `cty` and `hwy` columns to map to the x- and y-coordinates in the plot, we can do that as follows: -->\n\n<!-- ```{r} -->\n<!-- #| fig-width: 6 -->\n<!-- #| fig-height: 4 -->\n<!-- #| fig-align: center -->\n\n<!-- ggplot(mpg,  -->\n<!--        mapping = aes(x = cty, y = hwy)) -->\n<!-- ``` -->\n\n<!-- ## **Layers** -->\n\n<!-- -   Every layer consists of three important parts: -->\n\n<!--     -   The **geometry** that determines *how* data are displayed, such as points, lines, or rectangles -->\n\n<!--     -   The **statistical transformation** that may compute new variables from the data and affect *what* of the data is displayed. -->\n\n<!--     -   The **position adjustment** that primarily determines *where* a piece of data is being displayed -->\n\n<!-- -   A layer can be constructed using the `geom_*()` and `stat_*()` functions -->\n\n<!--     -   These functions often determine one of the three parts of a layer, while the other two can still be specified. -->\n\n<!-- ## Data + Mapping + Layers -->\n\n<!-- Here is how we can use two layers to display the `cty` and `hwy` columns of the `mpg` dataset as points and stack a trend line on top: -->\n\n<!-- ```{r} -->\n<!-- #| fig-width: 6 -->\n<!-- #| fig-height: 4 -->\n<!-- #| fig-align: center -->\n\n<!-- ggplot(mpg, aes(cty, hwy)) + -->\n<!--   # to create a scatterplot -->\n<!--   geom_point() + -->\n<!--   # to fit and overlay a line -->\n<!--   geom_smooth(formula = y ~ x, method = \"lm\") -->\n<!-- ``` -->\n\n\n## Building a ggplot step by step\n\n#### Step 1: Just data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = nhanes.samp.adult)\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-47-1.png){width=960}\n:::\n:::\n\n\n\n\n## Building a ggplot step by step\n\n#### Step 2: Add mapping\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, aes(x = BMI))\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-48-1.png){width=960}\n:::\n:::\n\n\n\n## Building a ggplot step by step\n\n#### Step 3: Add geom\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, aes(x = BMI)) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-49-1.png){width=960}\n:::\n:::\n\n\n\n\n## Your first ggplot: histogram\n\n**Histogram** - shows the distribution of a single numeric variable.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(data = nhanes.samp.adult, \n       mapping = aes(x = BMI)) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-50-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n**What does this tell us?**\n\n- Most people have BMI between 20-35\n- Distribution is slightly right-skewed\n- Some people with very high BMI (outliers)\n\n## Customizing histograms\n\nYou can control the appearance of histograms.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Adjust bin width\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = BMI)) +\n  geom_histogram(binwidth = 2)\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-51-1.png){width=960}\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Adjust number of bins\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = BMI)) +\n  geom_histogram(bins = 50)\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-52-1.png){width=960}\n:::\n:::\n\n\n\n:::\n:::\n\nTry different values to find what best reveals patterns in your data.\n\n## Boxplots - comparing distributions\n\n**Boxplot** - shows the distribution across groups.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Gender, y = BMI)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-53-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n**Boxplot components:**\n\n- Box: middle 50% of data (IQR)\n- Line in box: median\n- Whiskers: extend to most extreme non-outlier values\n- Points: potential outliers\n\n## Boxplot by multiple groups\n\nWe can compare distributions across multiple categorical variables.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Diabetes, y = BMI)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-54-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\nPeople with diabetes tend to have higher BMI.\n\n## Adding color to boxplots\n\nColor can be mapped to a variable using `aes()`.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Gender, \n           y = BMI, \n           fill = Diabetes)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-55-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n`fill` controls the fill color of shapes.\n\n`color` would control the outline color.\n\n## Scatterplots - relationship between two numeric variables\n\n**Scatterplot** - shows the relationship between two numeric variables.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Height, y = Weight)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-56-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n**What we see:**\n\n- Positive relationship\n- Taller people tend to weigh more\n- Some variability\n\n## Enhancing scatterplots with color\n\nMap a third variable to color to see patterns.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Height, \n           y = Weight, \n           color = Gender)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-57-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\nNow we can see if the relationship differs by gender.\n\n## Adjusting point transparency\n\nWhen points overlap, transparency (`alpha`) helps.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Height, \n           y = Weight, \n           color = Gender)) +\n  geom_point(alpha = 0.5)\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-58-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n`alpha` ranges from 0 (transparent) to 1 (opaque).\n\n## Bar charts - categorical data\n\n**Bar chart** - shows counts or frequencies of categories.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Diabetes)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-59-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n`geom_bar()` automatically counts observations in each category.\n\n## Grouped bar charts\n\nCompare categories across groups by mapping a variable to `fill`.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Gender, \n           fill = Diabetes)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-60-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\nBy default, bars are stacked.\n\n## Position adjustments for bar charts\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Stacked (default)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Gender, \n           fill = Diabetes)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-61-1.png){width=960}\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Side-by-side\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Gender, \n           fill = Diabetes)) +\n  geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-62-1.png){width=960}\n:::\n:::\n\n\n\n:::\n:::\n\n## Adding labels and titles\n\nMake your plots more informative with labels.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Height, y = Weight)) +\n  geom_point(alpha = 0.5) +\n  labs(\n    title = \"Height vs Weight in NHANES\",\n    subtitle = \"Adult participants\",\n    x = \"Height (cm)\",\n    y = \"Weight (kg)\",\n    caption = \"Data: NHANES\"\n  )\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-63-1.png){width=960}\n:::\n:::\n\n\n\n## Faceting - small multiples\n\n**Facets** create separate panels for subgroups.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = BMI)) +\n  geom_histogram(bins = 30) +\n  facet_wrap(~Gender)\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-64-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n`facet_wrap()` creates a panel for each level of a variable.\n\n## Faceting by two variables\n\nCreate a grid of panels with two variables.\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = BMI)) +\n  geom_histogram(bins = 30) +\n  facet_grid(Gender ~ Diabetes)\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-65-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\n`facet_grid()` creates rows × columns layout.\n\n## Combining dplyr and ggplot2\n\nYou can pipe data directly into `ggplot()`!\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nnhanes.samp.adult %>%\n  filter(Age >= 50) %>%\n  ggplot(aes(x = Height, y = Weight)) +\n  geom_point(alpha = 0.5) +\n  labs(title = \"Height vs Weight (Age ≥ 50)\")\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-66-1.png){width=960}\n:::\n:::\n\n\n\n\\\n\nPipe `%>%` passes data to `ggplot()`.\n\nThen use `+` to add layers.\n\n## Saving your work\n\nRemember: **dplyr operations don't modify the original data** unless you save them.\n\n\\\n\n::: columns\n::: {.column width=\"50%\"}\n\n### Save filtered data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nadults_diabetes <- nhanes.samp.adult %>%\n  filter(Diabetes == \"Yes\")\n\n# Check it worked\nnrow(adults_diabetes)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 13\n```\n\n\n:::\n:::\n\n\n\n:::\n::: {.column width=\"50%\"}\n\n### Save data with new variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes_with_categories <- \n  nhanes.samp.adult %>%\n  mutate(\n    bmi_category = case_when(\n      BMI < 18.5 ~ \"Underweight\",\n      BMI < 25 ~ \"Normal\",\n      BMI < 30 ~ \"Overweight\",\n      BMI >= 30 ~ \"Obese\"\n    )\n  )\n```\n:::\n\n\n\n:::\n:::\n\n## Saving plots\n\nSave plots to files with `ggsave()`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a plot\np <- ggplot(nhanes.samp.adult, aes(x = BMI)) +\n  geom_histogram(bins = 30) +\n  labs(title = \"Distribution of BMI\")\n\n# Save it\nggsave(\"bmi_histogram.png\", plot = p, \n       width = 8, height = 6, dpi = 300)\n```\n:::\n\n\n\n\\\n\n**Tips:**\n\n- `ggsave()` saves the last plot if you don't specify `plot =`\n- Common formats: `.png`, `.pdf`, `.jpg`\n- Adjust `width` and `height` in inches\n- Use `dpi = 300` for publication quality\n\n## Common ggplot2 geoms\n\n| Geom | Use case | Variables needed |\n|------|----------|-----------------|\n| `geom_histogram()` | Distribution of one numeric variable | x |\n| `geom_density()` | Smooth distribution curve | x |\n| `geom_boxplot()` | Compare distributions across groups | x (categorical), y (numeric) |\n| `geom_point()` | Relationship between two numeric variables | x, y |\n| `geom_line()` | Trends over time or ordered data | x, y |\n| `geom_bar()` | Counts of categorical data | x |\n| `geom_col()` | Pre-computed values | x, y |\n\n## Quick practice (5 minutes)\n\nUsing what you've learned, create:\n\n1. A scatterplot of Age vs BMI\n2. Color the points by Diabetes status\n3. Add appropriate labels\n4. Add transparency to see overlapping points\n\n\\\n\n**Bonus:** Facet by Gender\n\n## Quick practice: solution\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nhanes.samp.adult, \n       aes(x = Age, y = BMI, color = Diabetes)) +\n  geom_point(alpha = 0.5) +\n  labs(\n    title = \"Relationship between Age and BMI\",\n    subtitle = \"NHANES adult sample\",\n    x = \"Age (years)\",\n    y = \"Body Mass Index (kg/m²)\"\n  ) +\n  facet_wrap(~Gender)\n```\n\n::: {.cell-output-display}\n![](07_eda_and_data_viz_files/figure-revealjs/unnamed-chunk-70-1.png){width=960}\n:::\n:::\n\n\n\n## EDA workflow summary\n\n**1. Import and inspect**\n\n- Load data\n- Check dimensions, variable names, and types\n- Look for missing values\n\n**2. Summarize**\n\n- Calculate summary statistics\n- Create frequency tables\n- Group by relevant variables\n\n**3. Visualize**\n\n- Plot distributions (histograms, boxplots)\n- Explore relationships (scatterplots)\n- Compare groups (facets, colors)\n\n**4. Iterate**\n\n- Ask new questions based on what you find\n- Filter, transform, and visualize again\n\n## Key takeaways\n\n- **Pipes (`%>%`)** chain operations together for readable code\n- **`dplyr` verbs** manipulate data:\n  - `filter()` - subset rows\n  - `select()` - choose columns\n  - `mutate()` - create/modify variables\n  - `group_by()` + `summarize()` - calculate summaries by group\n- **`janitor::tabyl()`** creates clean frequency tables\n- **`rstatix::get_summary_stats()`** provides pipe-friendly summary statistics\n- **`ggplot2`** builds visualizations using data + aesthetics + geoms\n- **Nothing changes your original data** unless you save it with `<-`\n\n## Resources for learning more\n\n**Tidyverse documentation:**\n\n- <https://dplyr.tidyverse.org/>\n- <https://ggplot2.tidyverse.org/>\n\n\\\n\n**Books (free online):**\n\n- [R for Data Science (2e)](https://r4ds.hadley.nz/) by Hadley Wickham & Garrett Grolemund\n- [Modern Dive](https://moderndive.com/) by Chester Ismay & Albert Kim\n\n\\\n\n**Cheat sheets:**\n\n- [Data transformation with dplyr](https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf)\n- [Data visualization with ggplot2](https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf)\n\n## Practice exercises\n\nTry these on your own to reinforce what you learned:\n\n1. Filter the data to people with BMI > 30\n2. Create a scatterplot of Age vs BMI\n3. Calculate mean height by gender\n4. Make a histogram of Age\n5. Create a two-way table of Gender and Diabetes status\n\n",
    "supporting": [
      "07_eda_and_data_viz_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}