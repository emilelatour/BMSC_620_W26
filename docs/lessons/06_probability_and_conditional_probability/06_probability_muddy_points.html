<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Muddy Points – BMSC 620: Introduction to Biostatistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../assets/css/styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-sm " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">BMSC 620: Introduction to Biostatistics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../homework.html"> 
<span class="menu-text">Homework</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../exams.html"> 
<span class="menu-text">Exams</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Muddy Points</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../homework.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../exams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exams</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course info</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../instructors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Weekly materials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#thanks-for-the-feedback" id="toc-thanks-for-the-feedback" class="nav-link active" data-scroll-target="#thanks-for-the-feedback">Thanks for the feedback</a></li>
  <li><a href="#a-note-on-pacing" id="toc-a-note-on-pacing" class="nav-link" data-scroll-target="#a-note-on-pacing">A note on pacing</a></li>
  <li><a href="#a-note-on-muddy-points-timing" id="toc-a-note-on-muddy-points-timing" class="nav-link" data-scroll-target="#a-note-on-muddy-points-timing">A note on muddy points timing</a></li>
  <li><a href="#multiplication-rule-vs.-conditional-probability" id="toc-multiplication-rule-vs.-conditional-probability" class="nav-link" data-scroll-target="#multiplication-rule-vs.-conditional-probability">Multiplication rule vs.&nbsp;conditional probability</a>
  <ul class="collapse">
  <li><a href="#conditional-probability" id="toc-conditional-probability" class="nav-link" data-scroll-target="#conditional-probability">Conditional probability</a></li>
  <li><a href="#multiplication-rule" id="toc-multiplication-rule" class="nav-link" data-scroll-target="#multiplication-rule">Multiplication rule</a></li>
  <li><a href="#the-relationship" id="toc-the-relationship" class="nav-link" data-scroll-target="#the-relationship">The relationship</a></li>
  <li><a href="#example-with-numbers" id="toc-example-with-numbers" class="nav-link" data-scroll-target="#example-with-numbers">Example with numbers</a></li>
  </ul></li>
  <li><a href="#understanding-pipes-in-r" id="toc-understanding-pipes-in-r" class="nav-link" data-scroll-target="#understanding-pipes-in-r">Understanding pipes in R: <code>%&gt;%</code></a>
  <ul class="collapse">
  <li><a href="#what-pipes-do" id="toc-what-pipes-do" class="nav-link" data-scroll-target="#what-pipes-do">What pipes do</a></li>
  <li><a href="#why-pipes-are-helpful" id="toc-why-pipes-are-helpful" class="nav-link" data-scroll-target="#why-pipes-are-helpful">Why pipes are helpful</a></li>
  <li><a href="#well-spend-more-time-on-this" id="toc-well-spend-more-time-on-this" class="nav-link" data-scroll-target="#well-spend-more-time-on-this">We’ll spend more time on this</a></li>
  </ul></li>
  <li><a href="#how-does-r-know-that-n-is-the-count-column" id="toc-how-does-r-know-that-n-is-the-count-column" class="nav-link" data-scroll-target="#how-does-r-know-that-n-is-the-count-column">How does R know that “n” is the count column?</a>
  <ul class="collapse">
  <li><a href="#what-count-does" id="toc-what-count-does" class="nav-link" data-scroll-target="#what-count-does">What <code>count()</code> does</a></li>
  <li><a href="#why-we-can-use-n-in-mutate" id="toc-why-we-can-use-n-in-mutate" class="nav-link" data-scroll-target="#why-we-can-use-n-in-mutate">Why we can use “n” in <code>mutate()</code></a></li>
  <li><a href="#what-if-you-want-a-different-name" id="toc-what-if-you-want-a-different-name" class="nav-link" data-scroll-target="#what-if-you-want-a-different-name">What if you want a different name?</a></li>
  <li><a href="#bottom-line" id="toc-bottom-line" class="nav-link" data-scroll-target="#bottom-line">Bottom line</a></li>
  </ul></li>
  <li><a href="#does-mutate-edit-your-actual-data" id="toc-does-mutate-edit-your-actual-data" class="nav-link" data-scroll-target="#does-mutate-edit-your-actual-data">Does <code>mutate()</code> edit your actual data?</a>
  <ul class="collapse">
  <li><a href="#short-answer-no-it-doesnt-modify-your-original-data" id="toc-short-answer-no-it-doesnt-modify-your-original-data" class="nav-link" data-scroll-target="#short-answer-no-it-doesnt-modify-your-original-data">Short answer: No, it doesn’t modify your original data</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#to-keep-the-changes-you-need-to-save-them" id="toc-to-keep-the-changes-you-need-to-save-them" class="nav-link" data-scroll-target="#to-keep-the-changes-you-need-to-save-them">To keep the changes, you need to save them</a></li>
  <li><a href="#this-is-a-safety-feature" id="toc-this-is-a-safety-feature" class="nav-link" data-scroll-target="#this-is-a-safety-feature">This is a safety feature</a></li>
  </ul></li>
  <li><a href="#define-terms-before-using-them-tibbles-pipes-etc." id="toc-define-terms-before-using-them-tibbles-pipes-etc." class="nav-link" data-scroll-target="#define-terms-before-using-them-tibbles-pipes-etc.">Define terms before using them (tibbles, pipes, etc.)</a>
  <ul class="collapse">
  <li><a href="#what-ill-do-differently" id="toc-what-ill-do-differently" class="nav-link" data-scroll-target="#what-ill-do-differently">What I’ll do differently</a></li>
  <li><a href="#quick-definitions-for-this-week" id="toc-quick-definitions-for-this-week" class="nav-link" data-scroll-target="#quick-definitions-for-this-week">Quick definitions for this week</a></li>
  </ul></li>
  <li><a href="#r-coding-pace-and-screen-visibility" id="toc-r-coding-pace-and-screen-visibility" class="nav-link" data-scroll-target="#r-coding-pace-and-screen-visibility">R coding pace and screen visibility</a>
  <ul class="collapse">
  <li><a href="#what-ill-adjust" id="toc-what-ill-adjust" class="nav-link" data-scroll-target="#what-ill-adjust">What I’ll adjust</a></li>
  <li><a href="#for-those-following-along" id="toc-for-those-following-along" class="nav-link" data-scroll-target="#for-those-following-along">For those following along</a></li>
  <li><a href="#package-installation-delays" id="toc-package-installation-delays" class="nav-link" data-scroll-target="#package-installation-delays">Package installation delays</a></li>
  </ul></li>
  <li><a href="#request-for-keyboard-shortcuts-cheat-sheet" id="toc-request-for-keyboard-shortcuts-cheat-sheet" class="nav-link" data-scroll-target="#request-for-keyboard-shortcuts-cheat-sheet">Request for keyboard shortcuts cheat sheet</a>
  <ul class="collapse">
  <li><a href="#most-useful-shortcuts" id="toc-most-useful-shortcuts" class="nav-link" data-scroll-target="#most-useful-shortcuts">Most useful shortcuts</a></li>
  <li><a href="#rstudios-built-in-cheat-sheet" id="toc-rstudios-built-in-cheat-sheet" class="nav-link" data-scroll-target="#rstudios-built-in-cheat-sheet">RStudio’s built-in cheat sheet</a></li>
  </ul></li>
  <li><a href="#some-stats-seemed-too-basic-when-will-i-use-this" id="toc-some-stats-seemed-too-basic-when-will-i-use-this" class="nav-link" data-scroll-target="#some-stats-seemed-too-basic-when-will-i-use-this">Some stats seemed too basic — when will I use this?</a>
  <ul class="collapse">
  <li><a href="#why-we-start-with-fundamentals" id="toc-why-we-start-with-fundamentals" class="nav-link" data-scroll-target="#why-we-start-with-fundamentals">Why we start with fundamentals</a></li>
  <li><a href="#moving-toward-applications" id="toc-moving-toward-applications" class="nav-link" data-scroll-target="#moving-toward-applications">Moving toward applications</a></li>
  </ul></li>
  <li><a href="#working-through-code-outside-of-class" id="toc-working-through-code-outside-of-class" class="nav-link" data-scroll-target="#working-through-code-outside-of-class">Working through code outside of class</a>
  <ul class="collapse">
  <li><a href="#live-coding-is-for-exposure-not-mastery" id="toc-live-coding-is-for-exposure-not-mastery" class="nav-link" data-scroll-target="#live-coding-is-for-exposure-not-mastery">Live coding is for exposure, not mastery</a></li>
  <li><a href="#learning-happens-through-practice" id="toc-learning-happens-through-practice" class="nav-link" data-scroll-target="#learning-happens-through-practice">Learning happens through practice</a></li>
  <li><a href="#how-to-make-the-most-of-this" id="toc-how-to-make-the-most-of-this" class="nav-link" data-scroll-target="#how-to-make-the-most-of-this">How to make the most of this</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Muddy Points</h1>
<p class="subtitle lead">Probability and Conditional Probability</p>
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">February 9, 2026</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="thanks-for-the-feedback" class="level2">
<h2 class="anchored" data-anchor-id="thanks-for-the-feedback">Thanks for the feedback</h2>
<p>Thank you to everyone who submitted post-class feedback. I’m glad the probability material resonated with so many of you, and I appreciate the specific questions about R and the suggestions about course structure.</p>
</section>
<section id="a-note-on-pacing" class="level2">
<h2 class="anchored" data-anchor-id="a-note-on-pacing">A note on pacing</h2>
<p>Looking at the post-class survey for this lecture:</p>
<ul>
<li>78% felt the pace was about right</li>
<li>19% felt it was slightly too fast</li>
<li>3% felt it was slightly too slow</li>
</ul>
<p>This is strong feedback overall. For those who found the live R coding portion slightly too fast, remember that the lectures are recorded and you can rewatch those sections. We’ll also be working extensively with R next week, which will give you more practice time.</p>
</section>
<section id="a-note-on-muddy-points-timing" class="level2">
<h2 class="anchored" data-anchor-id="a-note-on-muddy-points-timing">A note on muddy points timing</h2>
<p>A few of you suggested moving muddy points to the end of class or posting them as videos rather than covering them during class time.</p>
<p>I appreciate this feedback. Here’s my current thinking:</p>
<ul>
<li>Many students specifically noted in the “clear points” that they found the muddy points review helpful</li>
<li>Reviewing them at the start helps ensure everyone’s on the same page before new material</li>
<li>That said, I hear that 20 minutes is a significant chunk of class time</li>
</ul>
<p>Going forward, I’ll:</p>
<ul>
<li>Post muddy points to the website before class (as I do now)</li>
<li>Give you time to read through them on your own first</li>
<li>Quickly highlight the most common or important points in class rather than going through everything line by line</li>
<li>Encourage you to come to office hours with specific questions</li>
</ul>
<p>This should give us more time for new material while still addressing the most important confusions.</p>
</section>
<section id="multiplication-rule-vs.-conditional-probability" class="level2">
<h2 class="anchored" data-anchor-id="multiplication-rule-vs.-conditional-probability">Multiplication rule vs.&nbsp;conditional probability</h2>
<p>One excellent question was: “I think I’m getting confused between the multiplication rule and conditional probability. Conditional probability is more ‘if this, then what about that’ and the multiplication rule is ‘if this and that’. But what is the difference, for instance between ‘positive results and has disease’ vs ‘of those who have positive results, how many have disease’? Is the difference just in the denominator?”</p>
<p>This is a great question because these concepts are closely related.</p>
<section id="conditional-probability" class="level3">
<h3 class="anchored" data-anchor-id="conditional-probability">Conditional probability</h3>
<p><strong>Conditional probability</strong> answers: “Given that A happened, what’s the probability of B?”</p>
<p><span class="math display">\[P(B|A) = \frac{P(A \text{ and } B)}{P(A)}\]</span></p>
<p>For example: “Of those who test positive, what proportion actually have the disease?”</p>
<p>The denominator is <span class="math inline">\(P(\text{positive test})\)</span> — we’re restricting our focus to only those who tested positive.</p>
</section>
<section id="multiplication-rule" class="level3">
<h3 class="anchored" data-anchor-id="multiplication-rule">Multiplication rule</h3>
<p>The <strong>multiplication rule</strong> calculates the probability that <strong>both</strong> A and B happen together:</p>
<p><span class="math display">\[P(A \text{ and } B) = P(A) \times P(B|A)\]</span></p>
<p>For example: “What’s the probability someone has the disease AND tests positive?”</p>
<p>This gives you the joint probability of both events occurring.</p>
</section>
<section id="the-relationship" class="level3">
<h3 class="anchored" data-anchor-id="the-relationship">The relationship</h3>
<p>You’re absolutely right that the denominator is the key difference:</p>
<ul>
<li><strong>Conditional probability</strong> divides by <span class="math inline">\(P(A)\)</span> to find the proportion within a subset</li>
<li><strong>Multiplication rule</strong> multiplies to find the probability of both events together</li>
</ul>
<p>They’re mathematically related — in fact, the multiplication rule comes from rearranging the conditional probability formula:</p>
<p><span class="math display">\[P(A \text{ and } B) = P(B|A) \times P(A)\]</span></p>
</section>
<section id="example-with-numbers" class="level3">
<h3 class="anchored" data-anchor-id="example-with-numbers">Example with numbers</h3>
<p>Suppose:</p>
<ul>
<li>1% of people have a disease: <span class="math inline">\(P(\text{disease}) = 0.01\)</span></li>
<li>The test is 95% accurate for those with disease: <span class="math inline">\(P(\text{positive}|\text{disease}) = 0.95\)</span></li>
</ul>
<p><strong>Conditional probability:</strong> Of those with disease, 95% test positive.</p>
<p><strong>Multiplication rule:</strong> The probability of having disease AND testing positive is: <span class="math display">\[P(\text{disease and positive}) = 0.01 \times 0.95 = 0.0095\]</span></p>
<p>So about 0.95% of the entire population has disease and tests positive.</p>
<p>The conditional probability focuses on a rate within a subgroup. The multiplication rule gives you the overall joint probability.</p>
</section>
</section>
<section id="understanding-pipes-in-r" class="level2">
<h2 class="anchored" data-anchor-id="understanding-pipes-in-r">Understanding pipes in R: <code>%&gt;%</code></h2>
<p>Several questions came up about pipes, including:</p>
<ul>
<li>“I don’t fully understand pipes in R and how to utilize them outside of linking data”</li>
<li>“I was confused when you used the example: <code>dplyr::count(Species) %&gt;% mutate(proportion = n / sum(n))</code>”</li>
</ul>
<p>This is completely understandable since we only briefly introduced pipes at the end of class.</p>
<section id="what-pipes-do" class="level3">
<h3 class="anchored" data-anchor-id="what-pipes-do">What pipes do</h3>
<p>The pipe operator <code>%&gt;%</code> takes the output from one function and passes it as the first argument to the next function.</p>
<p>Without pipes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="fu">count</span>(iris, Species), <span class="at">proportion =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With pipes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">proportion =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="why-pipes-are-helpful" class="level3">
<h3 class="anchored" data-anchor-id="why-pipes-are-helpful">Why pipes are helpful</h3>
<p>Pipes let you read code from left to right (or top to bottom), which is more natural than reading nested functions from inside-out.</p>
<p>Think of it like a recipe:</p>
<p><strong>Nested approach</strong> (inside-out):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bake</span>(<span class="fu">mix</span>(<span class="fu">add</span>(<span class="fu">get_flour</span>(), <span class="fu">get_eggs</span>()), <span class="fu">get_sugar</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Pipe approach</strong> (step-by-step):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_flour</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add</span>(<span class="fu">get_eggs</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mix</span>(<span class="fu">get_sugar</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="well-spend-more-time-on-this" class="level3">
<h3 class="anchored" data-anchor-id="well-spend-more-time-on-this">We’ll spend more time on this</h3>
<p>Don’t worry if pipes feel unclear right now. We briefly introduced them at the end of class, but we’ll use them extensively next week when we work with data visualization and data manipulation in the tidyverse.</p>
<p>For now, just know that <code>%&gt;%</code> means “take the thing on the left and pass it to the function on the right.”</p>
</section>
</section>
<section id="how-does-r-know-that-n-is-the-count-column" class="level2">
<h2 class="anchored" data-anchor-id="how-does-r-know-that-n-is-the-count-column">How does R know that “n” is the count column?</h2>
<p>One question was: “I was also a little confused when you used the example in class: <code>dplyr::count(Species) %&gt;% mutate(proportion = n / sum(n))</code>, how R knew that ‘n’ was the title for the column of counts.”</p>
<p>Great observation! This is specific to how the <code>count()</code> function works in <code>dplyr</code>.</p>
<section id="what-count-does" class="level3">
<h3 class="anchored" data-anchor-id="what-count-does">What <code>count()</code> does</h3>
<p>When you use <code>count()</code>, it automatically:</p>
<ol type="1">
<li>Groups the data by the variable(s) you specify</li>
<li>Counts the number of rows in each group</li>
<li><strong>Always names the count column “n”</strong>, unless you name it something else using the <code>name =</code> argument (see <code>?dplyr::count</code>)</li>
</ol>
<p>For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Species  n
1     setosa 50
2 versicolor 50
3  virginica 50</code></pre>
</div>
</div>
<p>This creates a table with two columns: - <code>Species</code> (the grouping variable) - <code>n</code> (the counts — automatically named by <code>count()</code>)</p>
</section>
<section id="why-we-can-use-n-in-mutate" class="level3">
<h3 class="anchored" data-anchor-id="why-we-can-use-n-in-mutate">Why we can use “n” in <code>mutate()</code></h3>
<p>Because <code>count()</code> always creates a column called <code>n</code>, we can refer to it by that name in the next step:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">proportion =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Species  n proportion
1     setosa 50  0.3333333
2 versicolor 50  0.3333333
3  virginica 50  0.3333333</code></pre>
</div>
</div>
<p>This works because: - <code>count()</code> created a column named <code>n</code> - <code>mutate()</code> sees that column and can use it in calculations</p>
</section>
<section id="what-if-you-want-a-different-name" class="level3">
<h3 class="anchored" data-anchor-id="what-if-you-want-a-different-name">What if you want a different name?</h3>
<p>You can rename the count column if you want:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Species, <span class="at">name =</span> <span class="st">"total"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Species total
1     setosa    50
2 versicolor    50
3  virginica    50</code></pre>
</div>
</div>
<p>Now the count column is called <code>total</code> instead of <code>n</code>.</p>
</section>
<section id="bottom-line" class="level3">
<h3 class="anchored" data-anchor-id="bottom-line">Bottom line</h3>
<p>The name <code>n</code> isn’t magic — it’s just the default name that <code>count()</code> gives to the count column. Once you know that pattern, you can use <code>n</code> in subsequent operations.</p>
</section>
</section>
<section id="does-mutate-edit-your-actual-data" class="level2">
<h2 class="anchored" data-anchor-id="does-mutate-edit-your-actual-data">Does <code>mutate()</code> edit your actual data?</h2>
<p>One question was: “I’m wondering when you use the mutate function, are you editing your actual data table, or just seeing what a new column would look like.”</p>
<p>Excellent question! This is important to understand for working safely with data in R.</p>
<section id="short-answer-no-it-doesnt-modify-your-original-data" class="level3">
<h3 class="anchored" data-anchor-id="short-answer-no-it-doesnt-modify-your-original-data">Short answer: No, it doesn’t modify your original data</h3>
<p>When you use <code>mutate()</code> (or most data manipulation functions in R), it creates a <strong>new data frame</strong> with the changes. It does <strong>not</strong> modify the original data frame unless you explicitly overwrite it.</p>
</section>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Original data</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use mutate to add a column</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Area =</span> Sepal.Length <span class="sc">*</span> Sepal.Width)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species Sepal.Area
1            5.1         3.5          1.4         0.2     setosa      17.85
2            4.9         3.0          1.4         0.2     setosa      14.70
3            4.7         3.2          1.3         0.2     setosa      15.04
4            4.6         3.1          1.5         0.2     setosa      14.26
5            5.0         3.6          1.4         0.2     setosa      18.00
6            5.4         3.9          1.7         0.4     setosa      21.06
7            4.6         3.4          1.4         0.3     setosa      15.64
8            5.0         3.4          1.5         0.2     setosa      17.00
9            4.4         2.9          1.4         0.2     setosa      12.76
10           4.9         3.1          1.5         0.1     setosa      15.19
11           5.4         3.7          1.5         0.2     setosa      19.98
12           4.8         3.4          1.6         0.2     setosa      16.32
13           4.8         3.0          1.4         0.1     setosa      14.40
14           4.3         3.0          1.1         0.1     setosa      12.90
15           5.8         4.0          1.2         0.2     setosa      23.20
16           5.7         4.4          1.5         0.4     setosa      25.08
17           5.4         3.9          1.3         0.4     setosa      21.06
18           5.1         3.5          1.4         0.3     setosa      17.85
19           5.7         3.8          1.7         0.3     setosa      21.66
20           5.1         3.8          1.5         0.3     setosa      19.38
21           5.4         3.4          1.7         0.2     setosa      18.36
22           5.1         3.7          1.5         0.4     setosa      18.87
23           4.6         3.6          1.0         0.2     setosa      16.56
24           5.1         3.3          1.7         0.5     setosa      16.83
25           4.8         3.4          1.9         0.2     setosa      16.32
26           5.0         3.0          1.6         0.2     setosa      15.00
27           5.0         3.4          1.6         0.4     setosa      17.00
28           5.2         3.5          1.5         0.2     setosa      18.20
29           5.2         3.4          1.4         0.2     setosa      17.68
30           4.7         3.2          1.6         0.2     setosa      15.04
31           4.8         3.1          1.6         0.2     setosa      14.88
32           5.4         3.4          1.5         0.4     setosa      18.36
33           5.2         4.1          1.5         0.1     setosa      21.32
34           5.5         4.2          1.4         0.2     setosa      23.10
35           4.9         3.1          1.5         0.2     setosa      15.19
36           5.0         3.2          1.2         0.2     setosa      16.00
37           5.5         3.5          1.3         0.2     setosa      19.25
38           4.9         3.6          1.4         0.1     setosa      17.64
39           4.4         3.0          1.3         0.2     setosa      13.20
40           5.1         3.4          1.5         0.2     setosa      17.34
41           5.0         3.5          1.3         0.3     setosa      17.50
42           4.5         2.3          1.3         0.3     setosa      10.35
43           4.4         3.2          1.3         0.2     setosa      14.08
44           5.0         3.5          1.6         0.6     setosa      17.50
45           5.1         3.8          1.9         0.4     setosa      19.38
46           4.8         3.0          1.4         0.3     setosa      14.40
47           5.1         3.8          1.6         0.2     setosa      19.38
48           4.6         3.2          1.4         0.2     setosa      14.72
49           5.3         3.7          1.5         0.2     setosa      19.61
50           5.0         3.3          1.4         0.2     setosa      16.50
51           7.0         3.2          4.7         1.4 versicolor      22.40
52           6.4         3.2          4.5         1.5 versicolor      20.48
53           6.9         3.1          4.9         1.5 versicolor      21.39
54           5.5         2.3          4.0         1.3 versicolor      12.65
55           6.5         2.8          4.6         1.5 versicolor      18.20
56           5.7         2.8          4.5         1.3 versicolor      15.96
57           6.3         3.3          4.7         1.6 versicolor      20.79
58           4.9         2.4          3.3         1.0 versicolor      11.76
59           6.6         2.9          4.6         1.3 versicolor      19.14
60           5.2         2.7          3.9         1.4 versicolor      14.04
61           5.0         2.0          3.5         1.0 versicolor      10.00
62           5.9         3.0          4.2         1.5 versicolor      17.70
63           6.0         2.2          4.0         1.0 versicolor      13.20
64           6.1         2.9          4.7         1.4 versicolor      17.69
65           5.6         2.9          3.6         1.3 versicolor      16.24
66           6.7         3.1          4.4         1.4 versicolor      20.77
67           5.6         3.0          4.5         1.5 versicolor      16.80
68           5.8         2.7          4.1         1.0 versicolor      15.66
69           6.2         2.2          4.5         1.5 versicolor      13.64
70           5.6         2.5          3.9         1.1 versicolor      14.00
71           5.9         3.2          4.8         1.8 versicolor      18.88
72           6.1         2.8          4.0         1.3 versicolor      17.08
73           6.3         2.5          4.9         1.5 versicolor      15.75
74           6.1         2.8          4.7         1.2 versicolor      17.08
75           6.4         2.9          4.3         1.3 versicolor      18.56
76           6.6         3.0          4.4         1.4 versicolor      19.80
77           6.8         2.8          4.8         1.4 versicolor      19.04
78           6.7         3.0          5.0         1.7 versicolor      20.10
79           6.0         2.9          4.5         1.5 versicolor      17.40
80           5.7         2.6          3.5         1.0 versicolor      14.82
81           5.5         2.4          3.8         1.1 versicolor      13.20
82           5.5         2.4          3.7         1.0 versicolor      13.20
83           5.8         2.7          3.9         1.2 versicolor      15.66
84           6.0         2.7          5.1         1.6 versicolor      16.20
85           5.4         3.0          4.5         1.5 versicolor      16.20
86           6.0         3.4          4.5         1.6 versicolor      20.40
87           6.7         3.1          4.7         1.5 versicolor      20.77
88           6.3         2.3          4.4         1.3 versicolor      14.49
89           5.6         3.0          4.1         1.3 versicolor      16.80
90           5.5         2.5          4.0         1.3 versicolor      13.75
91           5.5         2.6          4.4         1.2 versicolor      14.30
92           6.1         3.0          4.6         1.4 versicolor      18.30
93           5.8         2.6          4.0         1.2 versicolor      15.08
94           5.0         2.3          3.3         1.0 versicolor      11.50
95           5.6         2.7          4.2         1.3 versicolor      15.12
96           5.7         3.0          4.2         1.2 versicolor      17.10
97           5.7         2.9          4.2         1.3 versicolor      16.53
98           6.2         2.9          4.3         1.3 versicolor      17.98
99           5.1         2.5          3.0         1.1 versicolor      12.75
100          5.7         2.8          4.1         1.3 versicolor      15.96
101          6.3         3.3          6.0         2.5  virginica      20.79
102          5.8         2.7          5.1         1.9  virginica      15.66
103          7.1         3.0          5.9         2.1  virginica      21.30
104          6.3         2.9          5.6         1.8  virginica      18.27
105          6.5         3.0          5.8         2.2  virginica      19.50
106          7.6         3.0          6.6         2.1  virginica      22.80
107          4.9         2.5          4.5         1.7  virginica      12.25
108          7.3         2.9          6.3         1.8  virginica      21.17
109          6.7         2.5          5.8         1.8  virginica      16.75
110          7.2         3.6          6.1         2.5  virginica      25.92
111          6.5         3.2          5.1         2.0  virginica      20.80
112          6.4         2.7          5.3         1.9  virginica      17.28
113          6.8         3.0          5.5         2.1  virginica      20.40
114          5.7         2.5          5.0         2.0  virginica      14.25
115          5.8         2.8          5.1         2.4  virginica      16.24
116          6.4         3.2          5.3         2.3  virginica      20.48
117          6.5         3.0          5.5         1.8  virginica      19.50
118          7.7         3.8          6.7         2.2  virginica      29.26
119          7.7         2.6          6.9         2.3  virginica      20.02
120          6.0         2.2          5.0         1.5  virginica      13.20
121          6.9         3.2          5.7         2.3  virginica      22.08
122          5.6         2.8          4.9         2.0  virginica      15.68
123          7.7         2.8          6.7         2.0  virginica      21.56
124          6.3         2.7          4.9         1.8  virginica      17.01
125          6.7         3.3          5.7         2.1  virginica      22.11
126          7.2         3.2          6.0         1.8  virginica      23.04
127          6.2         2.8          4.8         1.8  virginica      17.36
128          6.1         3.0          4.9         1.8  virginica      18.30
129          6.4         2.8          5.6         2.1  virginica      17.92
130          7.2         3.0          5.8         1.6  virginica      21.60
131          7.4         2.8          6.1         1.9  virginica      20.72
132          7.9         3.8          6.4         2.0  virginica      30.02
133          6.4         2.8          5.6         2.2  virginica      17.92
134          6.3         2.8          5.1         1.5  virginica      17.64
135          6.1         2.6          5.6         1.4  virginica      15.86
136          7.7         3.0          6.1         2.3  virginica      23.10
137          6.3         3.4          5.6         2.4  virginica      21.42
138          6.4         3.1          5.5         1.8  virginica      19.84
139          6.0         3.0          4.8         1.8  virginica      18.00
140          6.9         3.1          5.4         2.1  virginica      21.39
141          6.7         3.1          5.6         2.4  virginica      20.77
142          6.9         3.1          5.1         2.3  virginica      21.39
143          5.8         2.7          5.1         1.9  virginica      15.66
144          6.8         3.2          5.9         2.3  virginica      21.76
145          6.7         3.3          5.7         2.5  virginica      22.11
146          6.7         3.0          5.2         2.3  virginica      20.10
147          6.3         2.5          5.0         1.9  virginica      15.75
148          6.5         3.0          5.2         2.0  virginica      19.50
149          6.2         3.4          5.4         2.3  virginica      21.08
150          5.9         3.0          5.1         1.8  virginica      17.70</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the original data again</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<p>Notice that <code>iris</code> still looks the same — it doesn’t have the <code>Sepal.Area</code> column. The <code>mutate()</code> operation created a new data frame that we didn’t save.</p>
</section>
<section id="to-keep-the-changes-you-need-to-save-them" class="level3">
<h3 class="anchored" data-anchor-id="to-keep-the-changes-you-need-to-save-them">To keep the changes, you need to save them</h3>
<p>If you want to keep the modified data, you need to assign it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the modified data to a new object</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>iris_modified <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Area =</span> Sepal.Length <span class="sc">*</span> Sepal.Width)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Now iris_modified has the new column</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris_modified)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species Sepal.Area
1          5.1         3.5          1.4         0.2  setosa      17.85
2          4.9         3.0          1.4         0.2  setosa      14.70
3          4.7         3.2          1.3         0.2  setosa      15.04
4          4.6         3.1          1.5         0.2  setosa      14.26
5          5.0         3.6          1.4         0.2  setosa      18.00
6          5.4         3.9          1.7         0.4  setosa      21.06</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># But iris is still unchanged</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<p>Or, you can overwrite the original (use with caution):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This replaces iris with the modified version</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>iris <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sepal.Area =</span> Sepal.Length <span class="sc">*</span> Sepal.Width)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="this-is-a-safety-feature" class="level3">
<h3 class="anchored" data-anchor-id="this-is-a-safety-feature">This is a safety feature</h3>
<p>R’s approach means you can experiment freely without accidentally destroying your data. You can try different transformations and see what they look like, and your original data remains safe unless you explicitly choose to overwrite it.</p>
</section>
</section>
<section id="define-terms-before-using-them-tibbles-pipes-etc." class="level2">
<h2 class="anchored" data-anchor-id="define-terms-before-using-them-tibbles-pipes-etc.">Define terms before using them (tibbles, pipes, etc.)</h2>
<p>One comment noted: “I think it would be helpful in the future if you tried to define things before we started using them. For instance it would be nice to know a tibble is just a type of table or that a pipe was used to chain codes before we were using and manipulating them.”</p>
<p>This is very fair feedback. I introduced several tidyverse concepts quickly at the end of class without proper definitions.</p>
<section id="what-ill-do-differently" class="level3">
<h3 class="anchored" data-anchor-id="what-ill-do-differently">What I’ll do differently</h3>
<p>Going forward, especially in next week’s data visualization class:</p>
<ul>
<li>I’ll define new terms and functions before using them in examples</li>
<li>I’ll explain the “why” along with the “how”</li>
<li>I’ll be more explicit about which concepts are “nice to know” vs.&nbsp;“essential right now”</li>
</ul>
</section>
<section id="quick-definitions-for-this-week" class="level3">
<h3 class="anchored" data-anchor-id="quick-definitions-for-this-week">Quick definitions for this week</h3>
<p>For reference:</p>
<ul>
<li><p><strong>Tibble</strong>: A modern version of a data frame (R’s name for a data table). It’s essentially the same thing, just with slightly nicer printing and behavior. When you see <code>tibble</code>, think “data table.”</p></li>
<li><p><strong>Pipe (<code>%&gt;%</code>)</strong>: An operator that passes the output of one function as input to the next function. Helps you chain operations together in a readable way.</p></li>
<li><p><strong><code>mutate()</code></strong>: Creates new columns or modifies existing ones in a data frame</p></li>
<li><p><strong><code>count()</code></strong>: Counts the number of rows for each group and automatically creates a column called <code>n</code> with the counts</p></li>
</ul>
<p>We’ll use all of these extensively next week, and I’ll make sure to introduce them more carefully.</p>
</section>
</section>
<section id="r-coding-pace-and-screen-visibility" class="level2">
<h2 class="anchored" data-anchor-id="r-coding-pace-and-screen-visibility">R coding pace and screen visibility</h2>
<p>Several comments mentioned:</p>
<ul>
<li>“The R stuff is still a little fast for me, especially with how small the screen is”</li>
<li>“It’s difficult to see when we transition to working in R Studio. I found that we were moving a bit too quickly here as well”</li>
<li>“It would be helpful if we were given why we do things instead of just this does that”</li>
</ul>
<p>These are all related to the live coding portion at the end of class.</p>
<section id="what-ill-adjust" class="level3">
<h3 class="anchored" data-anchor-id="what-ill-adjust">What I’ll adjust</h3>
<p>For next week’s class (which will involve substantial R work):</p>
<ol type="1">
<li><strong>Slower pace</strong>: I’ll be more deliberate about typing slowly and pausing between steps</li>
<li><strong>Larger font</strong>: I’ll increase the font size in RStudio for better visibility</li>
<li><strong>More “why”</strong>: I’ll explain the purpose of each step, not just what it does</li>
<li><strong>Clear transitions</strong>: I’ll announce when we’re switching from slides to RStudio</li>
<li><strong>Buffer time</strong>: I’ll plan for time to let people catch up, especially during package installation</li>
</ol>
</section>
<section id="for-those-following-along" class="level3">
<h3 class="anchored" data-anchor-id="for-those-following-along">For those following along</h3>
<p>If you’re typing along and fall behind:</p>
<ul>
<li>Focus on watching and understanding rather than typing everything in real-time</li>
<li>You can always catch up using the recorded lecture and posted code</li>
<li>The goal is understanding, not speed-typing</li>
</ul>
</section>
<section id="package-installation-delays" class="level3">
<h3 class="anchored" data-anchor-id="package-installation-delays">Package installation delays</h3>
<p>One comment noted: “Installing data packages always takes a few minutes or longer if there’s an error. It seems instantaneous on your screen, and I’d hate to fall behind while waiting for something to load.”</p>
<p>You’re absolutely right. Package installation can take time, especially on slower connections or older computers.</p>
<p>In class, I often have packages already installed, which is why it looks instant.</p>
<p>Going forward:</p>
<ul>
<li>I’ll warn you when we’re about to install packages</li>
<li>I’ll suggest installing key packages before class when possible</li>
<li>If installation takes time during class, I’ll pause and give everyone time to catch up</li>
</ul>
</section>
</section>
<section id="request-for-keyboard-shortcuts-cheat-sheet" class="level2">
<h2 class="anchored" data-anchor-id="request-for-keyboard-shortcuts-cheat-sheet">Request for keyboard shortcuts cheat sheet</h2>
<p>One request was: “Can we have a cheat sheet of keyboard functions we will commonly use?”</p>
<p>Great idea! Here are some essential RStudio keyboard shortcuts:</p>
<section id="most-useful-shortcuts" class="level3">
<h3 class="anchored" data-anchor-id="most-useful-shortcuts">Most useful shortcuts</h3>
<p><strong>Running code:</strong></p>
<ul>
<li><code>Ctrl/Cmd + Enter</code>: Run current line or selection</li>
<li><code>Ctrl/Cmd + Shift + Enter</code>: Run entire chunk (in Quarto)</li>
</ul>
<p><strong>Navigation:</strong></p>
<ul>
<li><code>Ctrl/Cmd + 1</code>: Move cursor to script editor</li>
<li><code>Ctrl/Cmd + 2</code>: Move cursor to console</li>
<li><code>Ctrl/Cmd + Shift + M</code>: Insert pipe operator <code>%&gt;%</code></li>
</ul>
<p><strong>Code help:</strong></p>
<ul>
<li><code>Tab</code>: Auto-complete function names or variable names</li>
<li><code>F1</code> (when cursor on function name): Open help documentation</li>
</ul>
<p><strong>Other useful:</strong></p>
<ul>
<li><code>Ctrl/Cmd + Shift + C</code>: Comment/uncomment selected lines</li>
<li><code>Alt + -</code>: Insert assignment operator <code>&lt;-</code></li>
</ul>
</section>
<section id="rstudios-built-in-cheat-sheet" class="level3">
<h3 class="anchored" data-anchor-id="rstudios-built-in-cheat-sheet">RStudio’s built-in cheat sheet</h3>
<p>RStudio has this built in! Go to: <strong>Help → Cheatsheets → RStudio IDE Cheat Sheet</strong></p>
<p>I’ll also post a short list of the most essential shortcuts to the course website.</p>
</section>
</section>
<section id="some-stats-seemed-too-basic-when-will-i-use-this" class="level2">
<h2 class="anchored" data-anchor-id="some-stats-seemed-too-basic-when-will-i-use-this">Some stats seemed too basic — when will I use this?</h2>
<p>One comment noted: “Some of the stats seemed so basic I had a hard time understanding when I would use it in my own work/day to day. But I’m sure when we get further it’ll all fall into place.”</p>
<p>This is a fair concern, and you’re right that things will click more as we progress.</p>
<section id="why-we-start-with-fundamentals" class="level3">
<h3 class="anchored" data-anchor-id="why-we-start-with-fundamentals">Why we start with fundamentals</h3>
<p>Probability concepts like conditional probability, independence, and joint distributions are foundational to:</p>
<ul>
<li>Understanding statistical tests (coming soon)</li>
<li>Interpreting confidence intervals and p-values</li>
<li>Building regression models</li>
<li>Making sense of diagnostic test results (like we did with sensitivity/specificity)</li>
</ul>
</section>
<section id="moving-toward-applications" class="level3">
<h3 class="anchored" data-anchor-id="moving-toward-applications">Moving toward applications</h3>
<p>Over the next few weeks, we’ll build on these fundamentals to:</p>
<ul>
<li>Analyze real datasets</li>
<li>Fit models to data</li>
<li>Test hypotheses</li>
<li>Make predictions</li>
</ul>
<p>The probability material we covered this week will come up repeatedly. For example:</p>
<ul>
<li>Regression coefficients are conditional means</li>
<li>P-values are conditional probabilities</li>
<li>Confidence intervals rely on probability distributions</li>
</ul>
<p>So while it might feel abstract now, these concepts are the building blocks for the applied work we’ll do later in the course.</p>
</section>
</section>
<section id="working-through-code-outside-of-class" class="level2">
<h2 class="anchored" data-anchor-id="working-through-code-outside-of-class">Working through code outside of class</h2>
<p>One comment: “The lecture material is helpful but I have trouble following the in class coding examples. I have to work through the homework in order to fully grasp concepts.”</p>
<p>This is completely normal and actually a healthy learning process!</p>
<section id="live-coding-is-for-exposure-not-mastery" class="level3">
<h3 class="anchored" data-anchor-id="live-coding-is-for-exposure-not-mastery">Live coding is for exposure, not mastery</h3>
<p>The purpose of live coding in class is to:</p>
<ul>
<li>Show you what’s possible</li>
<li>Demonstrate the workflow</li>
<li>Give you examples to refer back to</li>
</ul>
<p>It’s <strong>not</strong> expected that you’ll fully understand everything the first time you see it.</p>
</section>
<section id="learning-happens-through-practice" class="level3">
<h3 class="anchored" data-anchor-id="learning-happens-through-practice">Learning happens through practice</h3>
<p>Real understanding comes from:</p>
<ul>
<li>Working through homework problems</li>
<li>Experimenting with the code on your own</li>
<li>Making mistakes and debugging them</li>
<li>Applying the concepts to different datasets</li>
</ul>
<p>If you find that you need to work through examples outside of class to really understand them, that’s exactly how it should work. The in-class demos are the starting point, not the finish line.</p>
</section>
<section id="how-to-make-the-most-of-this" class="level3">
<h3 class="anchored" data-anchor-id="how-to-make-the-most-of-this">How to make the most of this</h3>
<ul>
<li>Watch the recordings when working on homework</li>
<li>Try modifying the in-class examples with different data</li>
<li>Come to office hours to work through specific confusions</li>
</ul>
<p>You’re learning in exactly the right way.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>