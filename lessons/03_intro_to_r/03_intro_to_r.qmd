---
title: "Introduction to R, RStudio, and Quarto"
author: "Emile Latour, Nicky Wakim, Meike Niederhausen"
date: "`r library(here); source(here('class_dates.R')); w1d1`"
date-format: long
format:
  revealjs:
    theme: "../../assets/css/reveal-bmsc620_v4.scss"
    slide-number: true
    show-slide-number: all
    width: 1955
    height: 1100
    footer: "BMSC 620 | Intro to R, RStudio, and Quarto"
    html-math-method: mathjax
    header-includes: |
      <style>
      #wrap {
        width: 1650px;
        height: 900px;
        margin: 0 auto;
        overflow: hidden;
        border: 1px solid #999;
        border-radius: 8px;
      }
      #frame {
        width: 1650px;
        height: 900px;
        border: 0;
        zoom: 1.25;
        -moz-transform: scale(1.25);
        -moz-transform-origin: 0 0;
      }
      </style>
execute:
  echo: true
  freeze: auto
---

```{r}
#| label: "setup" 
#| include: false
#| message: false
#| warning: false

library(tidyverse)
library(lubridate)
library(janitor)
library(here)

source(here("class_dates.R"))

library(oibiostat)
```

## Learning objectives (today)

By the end of class, you should be able to:

1.	Open and navigate RStudio
2.	Create, edit, save, and render a Quarto (.qmd) document
3.	Use basic Markdown to format text in a Quarto document
4.	Create and run simple R code chunks and render the output to HTML

# Introduction to R

![[Artwork by @allison_horst](https://allisonhorst.com/everything-else)](/img_slides/horst_welcome_R.png){fig-align="center"}


## What is R?

::: columns
::: {.column width="70%"}
- A programming language
- Focus on statistical modeling and data analysis
    + import data, manipulate data, run statistics, make plots
- Useful for data science
- Great visualizations
- Also useful for most anything else you'd want to tell a computer to do
- Interfaces with other languages i.e. python, C++, bash

:::


::: {.column width="30%"}
![](/img_slides/R_logo.png)
:::
:::


For the history and details: [Wikipedia](https://bit.ly/1efFmaY)

- an interpreted language (run it through a command line)
- procedural programming with functions
- Why "R"?? Scheme inspired S (invented at Bell Labs in 1976) which inspired R since 1st letters of original authors (**free and open source!** in 2000)



## What is RStudio?

::: columns
::: {.column width="50%"}
R is a programming language
:::

::: {.column width="50%"}
RStudio is an integrated development environment (IDE)   
= an interface to use R (with perks!)
:::
:::

![[Modern Dive](https://moderndive.com/1-getting-started.html#r-rstudio)](/img_slides/r_vs_rstudio_1.png){fig-align="center"}


## Open RStudio on your computer (not R!)

![[Modern Dive](https://moderndive.com/1-getting-started.html#using-r-via-rstudio)](/img_slides/01_md_r.png){fig-align="center"}


## RStudio anatomy


![[Emma Rand](http://www-users.york.ac.uk/~er13/17C%20-%202018/pracs/01IntroductionToModuleAndRStudio.html#what_are_r_and_rstudio)](/img_slides/RStudio_Anatomy.svg){fig-align="center"}

Read more about RStudio's layout in Section 3.4 of "[Getting Used to R, RStudio, and R Markdown](https://rbasics.netlify.com/3-rstudiobasics.html#rstudio-layout)" (Ismay and Kennedy 2016) 


# Saving your work with Quarto

or, creating reproducible reports

![[Artwork by @allison_horst](https://allisonhorst.com/r-packages-functions)](/img_slides/horst_rmarkdown_wizards_quarto.png){fig-align="center"}

## Example: creating an html file

:::::: columns
::: {.column width="48%"}
### `.qmd` file

![](/img_slides/01_qmd_screenshot.png){fig-align="center" width="696"}
:::

::: {.column width="4%"}
:::

::: {.column width="48%"}
### `.html` output

![](/img_slides/default_quarto_html.png){fig-align="center" width="718"}
:::
::::::

## Quarto = `.qmd` file = Code + text

A `.qmd` file is where you **write** your work.

Rendering turns it into something you can **read and submit**.

If you edit the `.qmd`, re-render to update the `.html`.

![[Artwork from "Hello, Quarto" keynote by Julia Lowndes and Mine Çetinkaya-Rundel, presented at RStudio Conference 2022. Illustrated by Allison Horst.](https://allisonhorst.com/cetinkaya-rundel-lowndes-quarto-keynote)](/img_slides/horst_quarto_schematic2.png){fig-align="center"}

# Basic Quarto example

![[Artwork from "Hello, Quarto" keynote by Julia Lowndes and Mine Çetinkaya-Rundel, presented at RStudio Conference 2022. Illustrated by Allison Horst.](https://allisonhorst.com/cetinkaya-rundel-lowndes-quarto-keynote)](/img_slides/horst_quarto_moon_penguins.png){fig-align="center"}

## Before we get further in `.qmd` files

-   If you would like to code along, make sure to have RStudio open.

\

### Steps for making a Quarto file

1.  Create a Quarto file (`.qmd`)
2.  Edit a Quarto file (`.qmd`)
3.  Save the Quarto file (`.qmd`)
4.  Create html file

##  1. Create a Quarto file (`.qmd`)

::::: columns
::: {.column width="50%"}
**Two options:**

1.  click on File $\rightarrow$ New File $\rightarrow$ Quarto Document...$\rightarrow$ OK,
2.  or in upper left corner of RStudio click on ![](/img_slides/green_plus_create_file.png){width="92"} $\rightarrow$ ![](/img_slides/select_quarto_option.png){width="333"}

**Pop-up window selections:**

-   Enter a title and your name
-   Select `HTML` output format (default)
-   Engine: select `Knitr`
-   Editor: Select `Use visual markdown editor`
-   Click `Create`
:::

::: {.column width="50%"}
![](/img_slides/01_qmd_screenshot_popup.png)
:::
:::::

## The top block (YAML) - for later

That block controls document settings.

We will come back to it later.
For now: **do not change it**.

## 2. Edit a Quarto file (`.qmd`)

::::: columns
::: {.column width="50%"}
-   After clicking on `Create`, you should then see the following in your editor window:

\

-   You can try editing the text or changing the code!
    -   Make sure you are only editing at the "Quarto" header and below
:::

::: {.column width="50%"}
![](/img_slides/01_qmd_screenshot.png){fig-align="center"}
:::
:::::

## 3. Save the Quarto file (`.qmd`)

-   **Save the file** by
    -   selecting `File -> Save`,
    -   or clicking on ![](/img_slides/01_Script_Save.png){width="51" height="43"} (towards the left above the scripting window),
    -   or keyboard shortcut
        -   PC: *Ctrl + s*
        -   Mac: *Command + s*
-   You will need to specify 
    -   a **filename** to save the file as
        -   ALWAYS use **.qmd** as the filename extension for Quarto files
    -   the **folder** to save the file in
    <!-- -   Hint: this will probability go under "R_activities" and with a name like "R05_Quarto-work.qmd" -->
    - For now, save it to your desktop, or wherever you know you will find it again.

## 4. Create html file

We create the html file by **rendering** the .qmd file.

Two options:

1.  click on the Render icon ![](/img_slides/render_icon.png) at the top of the editor window,
2.  or use keyboard shortcuts
    -   Mac: *Command+Shift+K*
    -   PC: *Ctrl+Shift+K*

-   A new window will open with the html output.
-   You will now see both .qmd and .html files in the folder where you saved the .qmd file.

::: callout-note
-   The template .qmd file that RStudio creates will render to an html file by default.
-   The output format can be changed to create a Word doc, pdf, slides, etc.
:::

## Tip: changing the render view

-   You can change where your `.html` file pops up
-   I have it set to open in the "Viewer Pane" in the bottom right

\

![](/img_slides/R05_render_view.png)

## `.qmd` vs. its `.html` output

:::::: columns
::: {.column width="48%"}
### `.qmd` file

![](/img_slides/01_qmd_screenshot.png){fig-align="center" width="696"}
:::

::: {.column width="4%"}
:::

::: {.column width="48%"}
### `.html` output

![](/img_slides/default_quarto_html.png){fig-align="center" width="718"}
:::
::::::

## File naming for assignments

Use a consistent naming convention so we can grade efficiently:

`Lastname_FirstInitial_HW00.qmd`

Submit **both**:
- `.qmd`
- `.html`

# 3 types of Quarto content

1. [*Text*, lists, images, tables, links]{style="color:darkorange"}
2. Code chunks
3. YAML metadata 

![[Illustration by Alison Hill and Allison Horst, for RStudio.](https://allisonhorst.com/horst-hill-collaborations)](/img_slides/horst_hedgehog_text_code.png){fig-align="center"}

## Formatting text 

* __bold__, _italics_, super^scripts^ & sub~scripts~, ~~strikethrough~~, `verbatim`, etc. \
\


* Text is formatted through a markup language called `Markdown` ([Wikipedia](https://en.wikipedia.org/wiki/Markdown))
    * Other markup languages include html (webapges) and LaTeX (math)
    * All text formatting is specified via *code*
    * "Markdown is a plain text format that is designed to be easy to write, and, even more importantly, easy to read" [^1]
* Newer versions of RStudio include a `Visual editor` as well that makes formatting text similar to using a word processor. 


![](/img_slides/visual_editor_quarto.png){fig-align="center"}

[^1]: From Quarto's Markdown Basics webpage, https://quarto.org/docs/authoring/markdown-basics.html

## Formatting text: `Visual editor` 

* Using the `Visual editor` is similar to using a wordprocessor, such as Word
* Keyboard shortcuts usually work as well (_shown for Mac below_)

![](/img_slides/visual_editor_options_expanded_quarto.png){fig-align="center"}

## Practice

1.  Part 1
    1.  Using the visual editor, practice formatting text in your qmd file, such as making text **bold**, *italicized*, and in `code` format.
    2.  Add 1^st^, 2^nd^, and 3^rd^ level headers
    3.  Add a list with a
        -   sub-list (bullet and/or numbered)
    4.  Add a table
    5.  Add whatever else you are interested in!
2.  Part 2
    1.  Switch back to the `Source` editor and examine the markdown code that was used for the formatting.

**Questions**:

1.  What went smoothly?
2.  What hurdles did you encounter?


## How this connects to Homework 0

Everything you practiced today is exactly what you need for HW 0:

- Editing text with Markdown
- Creating and running R code chunks
- Saving a `.qmd` file
- Rendering to an `.html` file

For Homework 0, you will:

- Start from a provided `.qmd` template
- Make small edits
- Render successfully
- Submit **both** the `.qmd` and `.html`


## Formatting text: `Markdown` 

+---------------------------------------------------+---------------------------------------------------+
| Markdown:                                         | Output:                                           |
+===================================================+===================================================+
| ```                                               | *This text is in italics*, but _so is this text_. |
| *This text is in italics*, but _so is this text_. |                                                   |
| ```                                               |                                                   |
+---------------------------------------------------+---------------------------------------------------+
| ```                                               | **Bold** also has __2 options__                   |
| **Bold** also has __2 options__                   |                                                   |
| ```                                               |                                                   |
+---------------------------------------------------+---------------------------------------------------+
| ```                                               | ~~Should this be deleted?~~                       |
| ~~Should this be deleted?~~                       |                                                   |
| ```                                               |                                                   |
+---------------------------------------------------+---------------------------------------------------+
| ```                                               | Need^super^ or~sub~ scripts?                      |
| Need^super^ or~sub~ scripts?                      |                                                   |
| ```                                               |                                                   |
+---------------------------------------------------+---------------------------------------------------+
| ```                                               | `Code is often formatted as verbatim`             |
| `Code is often formatted as verbatim`             |                                                   |
| ```                                               |                                                   |
+---------------------------------------------------+---------------------------------------------------+
| ```                                               | > This is a block quote.                          |
| >This is a block quote.                           |                                                   |
| ```                                               |                                                   |
+---------------------------------------------------+---------------------------------------------------+


<!-- : {tbl-colwidths="\[50,50\]"} -->


## Headers

* Organize your documents using headers to create sections and subsections
* Use `#` at the beginning of the line to create headers

::: columns
::: {.column width="50%"}
Text in editor:

![](/img_slides/screenshot_headers.png){fig-align="center" height="320"}

:::

::: {.column width="50%"}
Output:

![](/img_slides/screenshot_headers_out.png){fig-align="center" height="320"}

<!-- # Header 1 -->

<!-- ## Header 2 -->

<!-- ### Header 3 -->

<!-- #### Header 4 -->

<!-- ##### Header 5 -->

<!-- ###### Header 6 -->

:::
:::


:::{.callout-important}
Make sure there is no space before the `#`, and there IS a space after the `#`
in order for the header to work properly.
:::



## RStudio tip


You can easily navigate through your `.qmd` file if you use headers to outline your text

![](/img_slides/default_quarto_html_outline.png){fig-align="center"}


# 3 types of Quarto content

1. Text, lists, images, tables, links
2. [*Code chunks*]{style="color:darkorange"}
3. YAML metadata 

![[Illustration by Alison Hill and Allison Horst, for RStudio.](https://allisonhorst.com/horst-hill-collaborations)](/img_slides/horst_hedgehog_text_code.png){fig-align="center"}


## Code chunks 

:::::: columns
::: {.column width="48%"}
### `.qmd` file

![](/img_slides/01_qmd_screenshot.png){fig-align="center" width="696"}
:::

::: {.column width="4%"}
:::

::: {.column width="48%"}
### `.html` output

![](/img_slides/default_quarto_html.png){fig-align="center" width="718"}
:::
::::::

## Create a code chunk

3 options to create a code chunk

1. Click on ![](/img_slides/code_chunk_insert_icon.png) at top right of the editor window, or

2. [__Keyboard shortcut__]{style="color:darkorange"}

|     |                        |
|-----|------------------------|
| Mac | *Command + Option + I* |
| PC  | *Ctrl + Alt + I*       |

3. `Visual editor`: Select `Insert` -> `Executable Cell` -> `R`

![](/img_slides/code_chunk_insert_visual.png)


## What does a code chunk look like? {.smaller}

An empty code chunk looks like this:

`Visual editor`

![](/img_slides/01_qmd_chunk_empty_visual.png)

`Source editor`

![](/img_slides/01_qmd_chunk_empty_source.png)

:::{.callout-important}
Note that a code chunks start with ` ```{r} ` and ends with ` ``` `.  Make sure there is no space before ` ``` `.
:::

## Enter and run code (1/n) {.smaller}

* __Type R code__ inside code chunks 
* __Select code__ you want to run, by 
    - placing the cursor in the line of code you want to run, 
    - __*or*__ highlighting the code you want to run

::: columns
::: {.column width="50%"}

* __Run selected code__ by
    - clicking on the ![](/img_slides/01_Script_Run.png) button in the top right corner of the scripting window and choosing `Run Selected Line(s)`, 
    - or typing one of the following key combinations:

|     |                        |
|-----|------------------------|
| Mac | __ctrl + return__      |
| PC  | __command + return__   |

* _Where does the output appear?_
:::

::: {.column width="50%"}

![](/img_slides/01_qmd_coding1a.png){fig-align="center"}

:::
:::

## Enter and run code (2/n)

::: {style="font-size: 80%;"}
* __Run all code__ in a chunk by
    - by clicking the play button in the top right corner of the chunk

* The code output appears below the code chunk
:::

![](/img_slides/01_qmd_coding2.png){fig-align="center"}

:::{.callout-note}
* The output should also appear in the Console. 
* Settings can be changed so that the output appears only in the Console and not below the code chunk: 
    * Select {{< fa solid gear >}} (to right of Render button) and then _Chunk Output in Console_.
:::


## Useful keyboard shortcuts {.smaller}

[Full list of keyboard shortcuts](https://support.posit.co/hc/en-us/articles/200711853-Keyboard-Shortcuts)\
\ 

+------------------------------------------+--------------------+-----------------+
| action                                   | mac                | windows/linux   |
+==========================================+====================+=================+
| Run code in qmd (or script)              | cmd + enter        | ctrl + enter    |
+------------------------------------------+--------------------+-----------------+
| `<-`                                     | option + -         | alt + -         |
+------------------------------------------+--------------------+-----------------+
| interrupt currently running command      | esc                | esc             |
+------------------------------------------+--------------------+-----------------+
| in console, retrieve previously run code | up/down            | up/down         |
+------------------------------------------+--------------------+-----------------+
| keyboard shortcut help                   | option + shift + k | alt + shift + k |
+------------------------------------------+--------------------+-----------------+

\

### Practice

Try typing code below in your qmd (with shortcut) and evaluating it:

```{r}
#| eval: false
y <- 5
y
```

# 3 types of Quarto content

1. Text, lists, images, tables, links
2. Code chunks
3. [*YAML metadata*]{style="color:darkorange"} 

![[Illustration by Alison Hill and Allison Horst, for RStudio.](https://allisonhorst.com/horst-hill-collaborations)](/img_slides/horst_hedgehog_text_code.png){fig-align="center"}


## `YAML` metadata

\

The block at the top controls document settings. We’ll come back to it later. For now, don’t touch it.